{"version":3,"file":"index-DQALGaSG.js","sources":["../../../ui/node_modules/react/cjs/react-jsx-runtime.production.min.js","../../../ui/node_modules/react/jsx-runtime.js","../../../core/dist/types.js","../../../ui/node_modules/react-dom/client.js","../../../core/dist/parser/tokenize.js","../../../core/dist/parser/parse.js","../../../core/dist/evaluator/decimals.js","../../../core/dist/evaluator/evaluate.js","../../../core/dist/index.js","../../../ui/src/state/store.tsx","../../../ui/src/components/Toolbar.tsx","../../../ui/src/components/Expression.tsx","../../../ui/src/components/Variables.tsx","../../../ui/src/components/Results.tsx","../../../ui/src/components/Footer.tsx","../../../ui/src/data/guidelines.ts","../../../ui/src/components/Guideline.tsx","../../../ui/src/App.tsx","../../../ui/src/main.tsx"],"sourcesContent":["/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","/**\n * SolCalc Core Types\n *\n * This file defines all types used throughout the core engine.\n * These types are the contract between parser, evaluator, and consumers.\n */\n// ============================================================================\n// Token Types (Lexer Output)\n// ============================================================================\nexport var TokenType;\n(function (TokenType) {\n    TokenType[\"NUMBER\"] = \"NUMBER\";\n    TokenType[\"DECIMAL_LITERAL\"] = \"DECIMAL_LITERAL\";\n    TokenType[\"IDENTIFIER\"] = \"IDENTIFIER\";\n    TokenType[\"TYPE_BOUND\"] = \"TYPE_BOUND\";\n    TokenType[\"PLUS\"] = \"PLUS\";\n    TokenType[\"MINUS\"] = \"MINUS\";\n    TokenType[\"MULTIPLY\"] = \"MULTIPLY\";\n    TokenType[\"DIVIDE\"] = \"DIVIDE\";\n    TokenType[\"POWER\"] = \"POWER\";\n    TokenType[\"LPAREN\"] = \"LPAREN\";\n    TokenType[\"RPAREN\"] = \"RPAREN\";\n    TokenType[\"EQUAL\"] = \"EQUAL\";\n    TokenType[\"NOT_EQUAL\"] = \"NOT_EQUAL\";\n    TokenType[\"LESS_THAN\"] = \"LESS_THAN\";\n    TokenType[\"LESS_THAN_OR_EQUAL\"] = \"LESS_THAN_OR_EQUAL\";\n    TokenType[\"GREATER_THAN\"] = \"GREATER_THAN\";\n    TokenType[\"GREATER_THAN_OR_EQUAL\"] = \"GREATER_THAN_OR_EQUAL\";\n    TokenType[\"EOF\"] = \"EOF\";\n})(TokenType || (TokenType = {}));\n// ============================================================================\n// AST Node Types (Parser Output)\n// ============================================================================\nexport var ASTNodeType;\n(function (ASTNodeType) {\n    ASTNodeType[\"NUMBER_LITERAL\"] = \"NUMBER_LITERAL\";\n    ASTNodeType[\"TYPE_BOUND_LITERAL\"] = \"TYPE_BOUND_LITERAL\";\n    ASTNodeType[\"IDENTIFIER\"] = \"IDENTIFIER\";\n    ASTNodeType[\"BINARY_OP\"] = \"BINARY_OP\";\n    ASTNodeType[\"EXPONENTIATION\"] = \"EXPONENTIATION\";\n    ASTNodeType[\"COMPARISON\"] = \"COMPARISON\";\n})(ASTNodeType || (ASTNodeType = {}));\n// ============================================================================\n// Error Types\n// ============================================================================\nexport class SolCalcError extends Error {\n    constructor(message) {\n        super(message);\n        this.name = 'SolCalcError';\n    }\n}\nexport class ParseError extends SolCalcError {\n    constructor(message, position) {\n        super(message);\n        this.position = position;\n        this.name = 'ParseError';\n    }\n}\nexport class EvaluationError extends SolCalcError {\n    constructor(message) {\n        super(message);\n        this.name = 'EvaluationError';\n    }\n}\nexport class DecimalMismatchError extends EvaluationError {\n    constructor(leftDecimals, rightDecimals, operator) {\n        super(`Decimal mismatch in ${operator}: left has ${leftDecimals} decimals, right has ${rightDecimals} decimals. ` +\n            `Addition and subtraction require matching decimals.`);\n        this.leftDecimals = leftDecimals;\n        this.rightDecimals = rightDecimals;\n        this.operator = operator;\n        this.name = 'DecimalMismatchError';\n    }\n}\nexport class InvalidExponentiationError extends EvaluationError {\n    constructor(message) {\n        super(`Invalid exponentiation: ${message}. Only \\`10 ** n\\` with dimensionless integer n is supported.`);\n        this.name = 'InvalidExponentiationError';\n    }\n}\nexport class DivisionByZeroError extends EvaluationError {\n    constructor() {\n        super('Division by zero');\n        this.name = 'DivisionByZeroError';\n    }\n}\nexport class UndefinedVariableError extends EvaluationError {\n    constructor(variableName) {\n        super(`Variable \"${variableName}\" is not defined. All variables must have explicit values and decimals.`);\n        this.variableName = variableName;\n        this.name = 'UndefinedVariableError';\n    }\n}\nexport class MissingDecimalsError extends EvaluationError {\n    constructor(variableName) {\n        super(`Variable \"${variableName}\" is missing decimals. All variables must have explicit decimals >= 0.`);\n        this.variableName = variableName;\n        this.name = 'MissingDecimalsError';\n    }\n}\nexport class ComparisonError extends EvaluationError {\n    constructor(message) {\n        super(message);\n        this.name = 'ComparisonError';\n    }\n}\nexport class ComparisonDecimalMismatchError extends ComparisonError {\n    constructor(leftDecimals, rightDecimals) {\n        super(`Cannot compare values with different decimals (${leftDecimals} vs ${rightDecimals}). ` +\n            `Normalize decimals explicitly before comparison.`);\n        this.leftDecimals = leftDecimals;\n        this.rightDecimals = rightDecimals;\n        this.name = 'ComparisonDecimalMismatchError';\n    }\n}\n//# sourceMappingURL=types.js.map","'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","/**\n * SolCalc Tokenizer\n *\n * Converts an expression string into a stream of tokens.\n * This is the first stage of parsing.\n *\n * Supported tokens:\n * - Numbers (integers and scientific notation: 1000, 1e18)\n * - Identifiers (variable names: amount, price)\n * - Arithmetic operators: + - * / **\n * - Comparison operators: == != < <= > >=\n * - Parentheses: ( )\n */\nimport { TokenType, ParseError } from '../types.js';\n/**\n * Tokenizes an expression string.\n *\n * @param input - The expression to tokenize\n * @returns Array of tokens\n * @throws ParseError on invalid characters or malformed numbers\n */\nexport function tokenize(input) {\n    const tokens = [];\n    let position = 0;\n    while (position < input.length) {\n        const char = input[position];\n        // Skip whitespace\n        if (isWhitespace(char)) {\n            position++;\n            continue;\n        }\n        // Check for type bounds (type(uintX|intX).max/min) before other identifiers\n        if (char === 't' && input.substring(position, position + 5) === 'type(') {\n            const typeBoundResult = readTypeBound(input, position);\n            if (typeBoundResult) {\n                tokens.push(typeBoundResult.token);\n                position = typeBoundResult.endPosition;\n                continue;\n            }\n            // If not a valid type bound, fall through to identifier handling\n        }\n        // Numbers (including scientific notation)\n        if (isDigit(char)) {\n            const token = readNumber(input, position);\n            tokens.push(token);\n            position = token.position + token.value.length;\n            continue;\n        }\n        // Identifiers (variable names)\n        if (isIdentifierStart(char)) {\n            const token = readIdentifier(input, position);\n            tokens.push(token);\n            position = token.position + token.value.length;\n            continue;\n        }\n        // Operators and parentheses\n        switch (char) {\n            case '+':\n                tokens.push({ type: TokenType.PLUS, value: '+', position });\n                position++;\n                continue;\n            case '-':\n                tokens.push({ type: TokenType.MINUS, value: '-', position });\n                position++;\n                continue;\n            case '/':\n                tokens.push({ type: TokenType.DIVIDE, value: '/', position });\n                position++;\n                continue;\n            case '(':\n                tokens.push({ type: TokenType.LPAREN, value: '(', position });\n                position++;\n                continue;\n            case ')':\n                tokens.push({ type: TokenType.RPAREN, value: ')', position });\n                position++;\n                continue;\n            case '*':\n                // Check for ** (exponentiation)\n                if (input[position + 1] === '*') {\n                    tokens.push({ type: TokenType.POWER, value: '**', position });\n                    position += 2;\n                }\n                else {\n                    tokens.push({ type: TokenType.MULTIPLY, value: '*', position });\n                    position++;\n                }\n                continue;\n            case '=':\n                // Check for == (equality)\n                if (input[position + 1] === '=') {\n                    tokens.push({ type: TokenType.EQUAL, value: '==', position });\n                    position += 2;\n                }\n                else {\n                    throw new ParseError(`Unexpected character: '${char}' (did you mean '=='?)`, position);\n                }\n                continue;\n            case '!':\n                // Check for != (not equal)\n                if (input[position + 1] === '=') {\n                    tokens.push({ type: TokenType.NOT_EQUAL, value: '!=', position });\n                    position += 2;\n                }\n                else {\n                    throw new ParseError(`Unexpected character: '${char}' (did you mean '!='?)`, position);\n                }\n                continue;\n            case '<':\n                // Check for <= (less than or equal)\n                if (input[position + 1] === '=') {\n                    tokens.push({ type: TokenType.LESS_THAN_OR_EQUAL, value: '<=', position });\n                    position += 2;\n                }\n                else {\n                    tokens.push({ type: TokenType.LESS_THAN, value: '<', position });\n                    position++;\n                }\n                continue;\n            case '>':\n                // Check for >= (greater than or equal)\n                if (input[position + 1] === '=') {\n                    tokens.push({ type: TokenType.GREATER_THAN_OR_EQUAL, value: '>=', position });\n                    position += 2;\n                }\n                else {\n                    tokens.push({ type: TokenType.GREATER_THAN, value: '>', position });\n                    position++;\n                }\n                continue;\n            default:\n                throw new ParseError(`Unexpected character: '${char}'`, position);\n        }\n    }\n    // Add EOF token\n    tokens.push({ type: TokenType.EOF, value: '', position });\n    return tokens;\n}\n/**\n * Reads a number token (integer, decimal literal, or scientific notation).\n *\n * Supported formats:\n * - 1000 (integer)\n * - 8.5 (decimal literal - only allowed when multiplied by power-of-10)\n * - 1e18 (scientific notation)\n * - 1E18 (scientific notation)\n * - 10e-6 (negative exponents allowed)\n */\nfunction readNumber(input, startPos) {\n    let position = startPos;\n    let value = '';\n    let isDecimal = false;\n    // Read integer part\n    while (position < input.length && isDigit(input[position])) {\n        value += input[position];\n        position++;\n    }\n    // Check for decimal point (e.g., 8.5)\n    // Only treat as decimal if followed by digits\n    if (position < input.length &&\n        input[position] === '.' &&\n        position + 1 < input.length &&\n        isDigit(input[position + 1])) {\n        isDecimal = true;\n        value += input[position]; // Add '.'\n        position++;\n        // Read fractional part\n        while (position < input.length && isDigit(input[position])) {\n            value += input[position];\n            position++;\n        }\n    }\n    // Check for scientific notation (e or E)\n    // Decimal literals cannot use scientific notation (e.g., 8.5e18 is not allowed)\n    if (!isDecimal && position < input.length && (input[position] === 'e' || input[position] === 'E')) {\n        value += input[position];\n        position++;\n        // Optional sign\n        if (position < input.length && (input[position] === '+' || input[position] === '-')) {\n            value += input[position];\n            position++;\n        }\n        // Exponent digits (required)\n        const exponentStart = position;\n        while (position < input.length && isDigit(input[position])) {\n            value += input[position];\n            position++;\n        }\n        // Validate that we got exponent digits\n        if (position === exponentStart) {\n            throw new ParseError('Invalid scientific notation: missing exponent digits', startPos);\n        }\n    }\n    return {\n        type: isDecimal ? TokenType.DECIMAL_LITERAL : TokenType.NUMBER,\n        value,\n        position: startPos,\n    };\n}\n/**\n * Reads an identifier token (variable name).\n *\n * Identifiers match: [a-zA-Z_][a-zA-Z0-9_]*\n */\nfunction readIdentifier(input, startPos) {\n    let position = startPos;\n    let value = '';\n    // First character: [a-zA-Z_]\n    value += input[position];\n    position++;\n    // Subsequent characters: [a-zA-Z0-9_]\n    while (position < input.length && isIdentifierPart(input[position])) {\n        value += input[position];\n        position++;\n    }\n    return {\n        type: TokenType.IDENTIFIER,\n        value,\n        position: startPos,\n    };\n}\n/**\n * Attempts to read a Solidity type bound token.\n *\n * Supported formats:\n * - type(uint8).max through type(uint256).max\n * - type(int8).min through type(int256).min\n * - type(uint).max (alias for uint256)\n * - type(int).max (alias for int256)\n *\n * Pattern: type\\((u?int)(\\d+)?\\)\\.(max|min)\n *\n * Returns null if the pattern doesn't match (allowing fallback to normal identifier).\n */\nfunction readTypeBound(input, startPos) {\n    // Match pattern: type(uint256).max or type(int128).min\n    const pattern = /^type\\((u?int)(\\d+)?\\)\\.(max|min)/;\n    const match = input.substring(startPos).match(pattern);\n    if (!match) {\n        return null;\n    }\n    const fullMatch = match[0];\n    const isSigned = match[1] === 'int'; // true if 'int', false if 'uint'\n    const bitsStr = match[2]; // undefined for 'uint' or 'int' aliases\n    const bound = match[3];\n    // Determine bit size\n    let bits;\n    if (bitsStr) {\n        bits = parseInt(bitsStr, 10);\n    }\n    else {\n        // Alias: uint or int → 256\n        bits = 256;\n    }\n    // Validate bit size (must be 8, 16, 24, ..., 256)\n    if (bits % 8 !== 0 || bits < 8 || bits > 256) {\n        throw new ParseError(`Invalid Solidity type: ${isSigned ? 'int' : 'uint'}${bits}. ` +\n            `Supported types: uint8-uint256 (multiples of 8) and int8-int256 (multiples of 8).`, startPos);\n    }\n    // Construct the full type name for the token value\n    const typeName = `${isSigned ? 'int' : 'uint'}${bitsStr || '256'}`;\n    const tokenValue = `type(${typeName}).${bound}`;\n    return {\n        token: {\n            type: TokenType.TYPE_BOUND,\n            value: tokenValue,\n            position: startPos,\n        },\n        endPosition: startPos + fullMatch.length,\n    };\n}\n// ============================================================================\n// Character Classification Helpers\n// ============================================================================\nfunction isWhitespace(char) {\n    return char === ' ' || char === '\\t' || char === '\\n' || char === '\\r';\n}\nfunction isDigit(char) {\n    return char >= '0' && char <= '9';\n}\nfunction isIdentifierStart(char) {\n    return (char >= 'a' && char <= 'z') || (char >= 'A' && char <= 'Z') || char === '_';\n}\nfunction isIdentifierPart(char) {\n    return isIdentifierStart(char) || isDigit(char);\n}\n//# sourceMappingURL=tokenize.js.map","/**\n * SolCalc Parser\n *\n * Converts a stream of tokens into an Abstract Syntax Tree (AST).\n * This is the second stage of parsing.\n *\n * Grammar (with precedence, lowest to highest):\n *   comparison     := expression (('==' | '!=' | '<' | '<=' | '>' | '>=') expression)?\n *   expression     := term (('+' | '-') term)*\n *   term           := exponentiation (('*' | '/') exponentiation)*\n *   exponentiation := primary ('**' primary)?\n *   primary        := NUMBER | IDENTIFIER | '(' expression ')'\n *\n * CRITICAL NOTES:\n * - Comparisons are TOP-LEVEL only (no nesting, no chaining)\n * - Exponentiation validation happens during evaluation, not parsing\n * - Comparisons are evaluated AFTER arithmetic (Phase 2)\n */\nimport { TokenType, ASTNodeType, ParseError, } from '../types.js';\nexport class Parser {\n    constructor(tokens) {\n        this.tokens = tokens;\n        this.position = 0;\n    }\n    /**\n     * Parses the token stream into an AST.\n     */\n    parse() {\n        const ast = this.parseComparison();\n        // Ensure we consumed all tokens (except EOF)\n        if (this.currentToken().type !== TokenType.EOF) {\n            throw new ParseError(`Unexpected token: ${this.currentToken().value}`, this.currentToken().position);\n        }\n        return ast;\n    }\n    /**\n     * Parses comparison expressions (lowest precedence: ==, !=, <, <=, >, >=)\n     *\n     * CRITICAL: Comparisons are TOP-LEVEL only.\n     * - Exactly ONE comparison per expression\n     * - No nested comparisons\n     * - No chaining (a < b < c is forbidden)\n     * - Evaluated AFTER all arithmetic (Phase 2)\n     */\n    parseComparison() {\n        let left = this.parseExpression();\n        // Check if we have a comparison operator\n        const token = this.currentToken();\n        const isComparisonOperator = token.type === TokenType.EQUAL ||\n            token.type === TokenType.NOT_EQUAL ||\n            token.type === TokenType.LESS_THAN ||\n            token.type === TokenType.LESS_THAN_OR_EQUAL ||\n            token.type === TokenType.GREATER_THAN ||\n            token.type === TokenType.GREATER_THAN_OR_EQUAL;\n        if (!isComparisonOperator) {\n            // No comparison operator - return arithmetic result\n            return left;\n        }\n        // We have a comparison operator\n        const operator = this.getComparisonOperator(token.type);\n        this.advance();\n        const right = this.parseExpression();\n        // Check for chained comparisons (forbidden)\n        const nextToken = this.currentToken();\n        const hasAnotherComparison = nextToken.type === TokenType.EQUAL ||\n            nextToken.type === TokenType.NOT_EQUAL ||\n            nextToken.type === TokenType.LESS_THAN ||\n            nextToken.type === TokenType.LESS_THAN_OR_EQUAL ||\n            nextToken.type === TokenType.GREATER_THAN ||\n            nextToken.type === TokenType.GREATER_THAN_OR_EQUAL;\n        if (hasAnotherComparison) {\n            throw new ParseError(`Chained comparisons are not supported. Only one comparison operator per expression is allowed.`, nextToken.position);\n        }\n        return {\n            type: ASTNodeType.COMPARISON,\n            operator,\n            left,\n            right,\n        };\n    }\n    /**\n     * Converts a TokenType to a comparison operator string.\n     */\n    getComparisonOperator(tokenType) {\n        switch (tokenType) {\n            case TokenType.EQUAL:\n                return '==';\n            case TokenType.NOT_EQUAL:\n                return '!=';\n            case TokenType.LESS_THAN:\n                return '<';\n            case TokenType.LESS_THAN_OR_EQUAL:\n                return '<=';\n            case TokenType.GREATER_THAN:\n                return '>';\n            case TokenType.GREATER_THAN_OR_EQUAL:\n                return '>=';\n            default:\n                throw new Error(`Invalid comparison operator token: ${tokenType}`);\n        }\n    }\n    /**\n     * Parses an expression (lowest precedence: + -)\n     */\n    parseExpression() {\n        let left = this.parseTerm();\n        while (this.currentToken().type === TokenType.PLUS ||\n            this.currentToken().type === TokenType.MINUS) {\n            const operator = this.currentToken().type === TokenType.PLUS ? '+' : '-';\n            this.advance();\n            const right = this.parseTerm();\n            left = {\n                type: ASTNodeType.BINARY_OP,\n                operator,\n                left,\n                right,\n            };\n        }\n        return left;\n    }\n    /**\n     * Parses a term (medium precedence: * /)\n     */\n    parseTerm() {\n        let left = this.parseExponentiation();\n        while (this.currentToken().type === TokenType.MULTIPLY ||\n            this.currentToken().type === TokenType.DIVIDE) {\n            const operator = this.currentToken().type === TokenType.MULTIPLY ? '*' : '/';\n            this.advance();\n            const right = this.parseExponentiation();\n            left = {\n                type: ASTNodeType.BINARY_OP,\n                operator,\n                left,\n                right,\n            };\n        }\n        return left;\n    }\n    /**\n     * Parses exponentiation (highest precedence: **)\n     *\n     * Note: Right-associative (e.g., 2 ** 3 ** 2 = 2 ** (3 ** 2))\n     * However, we only allow `10 ** n`, so associativity doesn't matter in practice.\n     */\n    parseExponentiation() {\n        let left = this.parsePrimary();\n        if (this.currentToken().type === TokenType.POWER) {\n            this.advance();\n            const right = this.parseExponentiation(); // Right-associative\n            left = {\n                type: ASTNodeType.EXPONENTIATION,\n                base: left,\n                exponent: right,\n            };\n        }\n        return left;\n    }\n    /**\n     * Parses a primary expression (highest level: literals, identifiers, parentheses)\n     */\n    parsePrimary() {\n        const token = this.currentToken();\n        // Number literal\n        if (token.type === TokenType.NUMBER) {\n            this.advance();\n            return this.parseNumberLiteral(token.value);\n        }\n        // Decimal literal (only allowed when multiplied by power-of-10)\n        if (token.type === TokenType.DECIMAL_LITERAL) {\n            return this.parseDecimalLiteral(token);\n        }\n        // Type bound (type(uintX|intX).max/min)\n        if (token.type === TokenType.TYPE_BOUND) {\n            this.advance();\n            return this.parseTypeBound(token.value);\n        }\n        // Identifier (variable reference)\n        if (token.type === TokenType.IDENTIFIER) {\n            this.advance();\n            return {\n                type: ASTNodeType.IDENTIFIER,\n                name: token.value,\n            };\n        }\n        // Parenthesized expression\n        if (token.type === TokenType.LPAREN) {\n            this.advance();\n            const expr = this.parseExpression();\n            if (this.currentToken().type !== TokenType.RPAREN) {\n                throw new ParseError('Expected closing parenthesis', this.currentToken().position);\n            }\n            this.advance();\n            return expr;\n        }\n        throw new ParseError(`Unexpected token: ${token.value || token.type}`, token.position);\n    }\n    /**\n     * Parses a number literal and converts to bigint.\n     *\n     * Handles:\n     * - Regular integers: \"1000\" → 1000n with 0 decimals\n     * - Scale constants: \"1e18\" → 1n with 18 decimals (treated as scale factor)\n     * - Other scientific notation: \"5e18\" → 5000000000000000000n with 0 decimals\n     */\n    parseNumberLiteral(value) {\n        try {\n            // Check if this is a scale constant (1e<n> pattern)\n            if (value.toLowerCase().includes('e')) {\n                const [mantissaStr, exponentStr] = value.toLowerCase().split('e');\n                // If mantissa is exactly \"1\", treat as scale constant\n                if (mantissaStr === '1') {\n                    const exponent = parseInt(exponentStr, 10);\n                    if (isNaN(exponent)) {\n                        throw new ParseError(`Invalid exponent in scale constant: ${value}`, this.position);\n                    }\n                    if (exponent < 0) {\n                        throw new ParseError(`Negative exponents in scale constants are not supported: ${value}`, this.position);\n                    }\n                    // Return as scale constant: 1e18 → {value: 10^18, decimals: 18}\n                    // This represents \"1 with 18 decimals of precision\"\n                    // In fixed-point: 10^18 / 10^18 = 1\n                    const rawValue = 10n ** BigInt(exponent);\n                    return {\n                        type: ASTNodeType.NUMBER_LITERAL,\n                        value: rawValue,\n                        decimals: exponent,\n                    };\n                }\n                // Otherwise, parse as regular scientific notation\n                const bigintValue = this.parseScientificNotation(value);\n                return {\n                    type: ASTNodeType.NUMBER_LITERAL,\n                    value: bigintValue,\n                    decimals: 0,\n                };\n            }\n            // Regular integer\n            const bigintValue = BigInt(value);\n            return {\n                type: ASTNodeType.NUMBER_LITERAL,\n                value: bigintValue,\n                decimals: 0,\n            };\n        }\n        catch (error) {\n            throw new ParseError(`Invalid number: ${value}`, this.position);\n        }\n    }\n    /**\n     * Parses a decimal literal (e.g., 8.5).\n     *\n     * Decimal literals are ONLY allowed when immediately multiplied by a power-of-10\n     * that fully absorbs the decimal. This transforms the decimal into a scaled integer.\n     *\n     * Allowed:\n     * - 8.5 * 1e18 → 85 * 1e17\n     * - 0.25 * 1e18 → 25 * 1e16\n     *\n     * Disallowed:\n     * - 8.5 / 2 → decimal survives\n     * - 8.5 + 1 → decimal survives\n     */\n    parseDecimalLiteral(decimalToken) {\n        this.advance(); // Consume decimal token\n        // Check if followed by multiplication\n        if (this.currentToken().type !== TokenType.MULTIPLY) {\n            throw new ParseError('Decimal literal cannot be represented as an integer.\\n\\n' +\n                'Solidity does not support floating-point math.\\n' +\n                'Decimals are only allowed when fully scaled by a power of 10.\\n\\n' +\n                'Examples:\\n' +\n                `  • ${decimalToken.value} * 1e18 ✅\\n` +\n                `  • ${decimalToken.value} / 2 ❌`, decimalToken.position);\n        }\n        this.advance(); // Consume '*'\n        // Next token must be a power-of-10 (NUMBER token in scientific notation or 10**n)\n        const multiplierToken = this.currentToken();\n        if (multiplierToken.type !== TokenType.NUMBER) {\n            throw new ParseError(`Decimal literal ${decimalToken.value} must be multiplied by a power-of-10 constant (e.g., 1e18, 10**18)`, multiplierToken.position);\n        }\n        // Parse the decimal value to extract integer part and decimal places\n        const [integerPart, fractionalPart] = decimalToken.value.split('.');\n        if (!fractionalPart) {\n            throw new ParseError(`Invalid decimal literal: ${decimalToken.value}`, decimalToken.position);\n        }\n        const decimalPlaces = fractionalPart.length;\n        const numerator = BigInt(integerPart + fractionalPart); // e.g., \"8.5\" → 85n\n        // Parse the multiplier (should be a scale constant like 1e18)\n        const multiplierValue = this.parseNumberLiteral(multiplierToken.value);\n        // Verify that the multiplier's raw value is sufficient to absorb the decimal\n        // For scale constants like 1e18, the value is 10^18 and decimals is 18\n        // Required: multiplier value >= 10^decimalPlaces\n        const requiredMultiplier = 10n ** BigInt(decimalPlaces);\n        if (multiplierValue.value < requiredMultiplier) {\n            throw new ParseError(`Decimal literal ${decimalToken.value} requires multiplication by at least 10^${decimalPlaces} to eliminate decimals.\\n` +\n                `Use a scale constant like 1e${decimalPlaces} or larger.`, multiplierToken.position);\n        }\n        this.advance(); // Consume multiplier\n        // Normalize: decimal * scale → (numerator * scale / 10^decimalPlaces)\n        // e.g., 8.5 * 1e18 → 85 * (10^18 / 10) = 85 * 10^17\n        // The result inherits the decimals from the scale constant\n        const normalizedValue = (numerator * multiplierValue.value) / requiredMultiplier;\n        return {\n            type: ASTNodeType.NUMBER_LITERAL,\n            value: normalizedValue,\n            decimals: multiplierValue.decimals, // Inherit decimals from the scale constant\n        };\n    }\n    /**\n     * Converts scientific notation to bigint.\n     *\n     * Examples:\n     * - \"1e18\" → 1000000000000000000n\n     * - \"5e3\" → 5000n\n     * - \"1e-6\" → error (we don't support fractional literals)\n     */\n    parseScientificNotation(value) {\n        const [mantissaStr, exponentStr] = value.toLowerCase().split('e');\n        if (!mantissaStr || !exponentStr) {\n            throw new ParseError(`Invalid scientific notation: ${value}`, this.position);\n        }\n        const mantissa = BigInt(mantissaStr);\n        const exponent = parseInt(exponentStr, 10);\n        if (isNaN(exponent)) {\n            throw new ParseError(`Invalid exponent in scientific notation: ${value}`, this.position);\n        }\n        // Negative exponents would create fractional values, which we don't support in literals\n        if (exponent < 0) {\n            throw new ParseError(`Negative exponents in literals are not supported: ${value}. Use division instead.`, this.position);\n        }\n        // Calculate mantissa * 10^exponent\n        const multiplier = 10n ** BigInt(exponent);\n        return mantissa * multiplier;\n    }\n    /**\n     * Parses a Solidity type bound and calculates its value.\n     *\n     * Examples:\n     * - \"type(uint256).max\" → 2^256 - 1\n     * - \"type(uint128).max\" → 2^128 - 1\n     * - \"type(int256).max\" → 2^255 - 1\n     * - \"type(int256).min\" → -2^255\n     * - \"type(uint256).min\" → 0\n     *\n     * CRITICAL: All type bounds are scalars (decimals = 0).\n     */\n    parseTypeBound(value) {\n        // Extract components: type(uint256).max → type=\"uint256\", bound=\"max\"\n        const match = value.match(/^type\\((u?int)(\\d+)?\\)\\.(max|min)$/);\n        if (!match) {\n            throw new ParseError(`Invalid type bound: ${value}`, this.position);\n        }\n        const isSigned = match[1] === 'int';\n        const bitsStr = match[2] || '256';\n        const bound = match[3];\n        const bits = parseInt(bitsStr, 10);\n        // Construct the type name\n        const solidityType = `${isSigned ? 'int' : 'uint'}${bitsStr}`;\n        // Calculate the bound value\n        let boundValue;\n        if (!isSigned) {\n            // Unsigned: uintX\n            if (bound === 'max') {\n                // 2^bits - 1\n                boundValue = (2n ** BigInt(bits)) - 1n;\n            }\n            else {\n                // min is always 0 for unsigned\n                boundValue = 0n;\n            }\n        }\n        else {\n            // Signed: intX\n            if (bound === 'max') {\n                // 2^(bits-1) - 1\n                boundValue = (2n ** BigInt(bits - 1)) - 1n;\n            }\n            else {\n                // -2^(bits-1)\n                boundValue = -(2n ** BigInt(bits - 1));\n            }\n        }\n        return {\n            type: ASTNodeType.TYPE_BOUND_LITERAL,\n            value: boundValue,\n            decimals: 0, // ALWAYS 0 - type bounds are scalars\n            solidityType,\n            bound,\n        };\n    }\n    /**\n     * Returns the current token without consuming it.\n     */\n    currentToken() {\n        return this.tokens[this.position] || this.tokens[this.tokens.length - 1];\n    }\n    /**\n     * Advances to the next token.\n     */\n    advance() {\n        if (this.position < this.tokens.length - 1) {\n            this.position++;\n        }\n    }\n}\n/**\n * Main parsing function.\n *\n * @param tokens - Array of tokens from the tokenizer\n * @returns AST root node\n */\nexport function parse(tokens) {\n    const parser = new Parser(tokens);\n    return parser.parse();\n}\n//# sourceMappingURL=parse.js.map","/**\n * SolCalc Decimal Propagation\n *\n * This module handles decimal scale propagation through arithmetic operations.\n * This is the core logic that makes mixed-decimal arithmetic mechanically correct.\n *\n * Rules:\n * - Multiplication: decimals add\n * - Division: decimals subtract\n * - Addition/Subtraction: decimals must match exactly\n */\nimport { DecimalMismatchError } from '../types.js';\n/**\n * Calculates the resulting decimals for a multiplication operation.\n *\n * Rule: decimals add\n *\n * Examples:\n * - (18 decimals) * (6 decimals) = 24 decimals\n * - (0 decimals) * (18 decimals) = 18 decimals\n *\n * @param leftDecimals - Decimals of the left operand\n * @param rightDecimals - Decimals of the right operand\n * @returns Resulting decimals\n */\nexport function multiplyDecimals(leftDecimals, rightDecimals) {\n    return leftDecimals + rightDecimals;\n}\n/**\n * Calculates the resulting decimals for a division operation.\n *\n * Rule: decimals subtract\n *\n * Examples:\n * - (18 decimals) / (18 decimals) = 0 decimals\n * - (24 decimals) / (6 decimals) = 18 decimals\n * - (6 decimals) / (18 decimals) = -12 decimals (allowed)\n *\n * Note: Negative decimals are allowed in intermediate results.\n * This represents fractional scaling and is mathematically valid.\n *\n * @param leftDecimals - Decimals of the left operand (dividend)\n * @param rightDecimals - Decimals of the right operand (divisor)\n * @returns Resulting decimals\n */\nexport function divideDecimals(leftDecimals, rightDecimals) {\n    return leftDecimals - rightDecimals;\n}\n/**\n * Validates that decimals match for addition operation.\n *\n * Rule: decimals must be exactly equal\n *\n * Addition only makes sense when values have the same scale.\n * You cannot add 1 WAD (18 decimals) to 1 USDC (6 decimals) without\n * explicit conversion.\n *\n * @param leftDecimals - Decimals of the left operand\n * @param rightDecimals - Decimals of the right operand\n * @returns The common decimals if they match\n * @throws DecimalMismatchError if decimals don't match\n */\nexport function addDecimals(leftDecimals, rightDecimals) {\n    if (leftDecimals !== rightDecimals) {\n        throw new DecimalMismatchError(leftDecimals, rightDecimals, '+');\n    }\n    return leftDecimals;\n}\n/**\n * Validates that decimals match for subtraction operation.\n *\n * Rule: decimals must be exactly equal\n *\n * Subtraction only makes sense when values have the same scale.\n *\n * @param leftDecimals - Decimals of the left operand\n * @param rightDecimals - Decimals of the right operand\n * @returns The common decimals if they match\n * @throws DecimalMismatchError if decimals don't match\n */\nexport function subtractDecimals(leftDecimals, rightDecimals) {\n    if (leftDecimals !== rightDecimals) {\n        throw new DecimalMismatchError(leftDecimals, rightDecimals, '-');\n    }\n    return leftDecimals;\n}\n/**\n * Formats a bigint value with its decimals into a human-readable string.\n *\n * Examples:\n * - value=1500000000000000000n, decimals=18 → \"1.5\"\n * - value=1000000n, decimals=6 → \"1.0\"\n * - value=1234n, decimals=2 → \"12.34\"\n * - value=1n, decimals=0 → \"1\"\n * - value=1n, decimals=-2 → \"100\" (negative decimals: multiply)\n *\n * @param value - The bigint value\n * @param decimals - Number of decimal places\n * @returns Human-readable decimal string\n */\nexport function formatWithDecimals(value, decimals) {\n    // Handle negative decimals (multiply by 10^|decimals|)\n    if (decimals < 0) {\n        const multiplier = 10n ** BigInt(-decimals);\n        return (value * multiplier).toString();\n    }\n    // Handle zero decimals\n    if (decimals === 0) {\n        return value.toString();\n    }\n    // Handle positive decimals\n    const isNegative = value < 0n;\n    const absValue = isNegative ? -value : value;\n    const valueStr = absValue.toString();\n    // Pad with leading zeros if needed\n    const paddedValue = valueStr.padStart(decimals + 1, '0');\n    // Split into integer and decimal parts\n    const integerPart = paddedValue.slice(0, -decimals) || '0';\n    const decimalPart = paddedValue.slice(-decimals);\n    const result = `${integerPart}.${decimalPart}`;\n    return isNegative ? `-${result}` : result;\n}\n/**\n * Scales a value to a target number of decimals.\n *\n * This is used when you need to convert a value from one decimal scale to another.\n *\n * Examples:\n * - scaleToDecimals(1000000n, 6, 18) → 1000000000000000000n\n * - scaleToDecimals(1000000000000000000n, 18, 6) → 1000000n\n *\n * @param value - The value to scale\n * @param fromDecimals - Current decimal scale\n * @param toDecimals - Target decimal scale\n * @returns Scaled value\n */\nexport function scaleToDecimals(value, fromDecimals, toDecimals) {\n    const decimalDiff = toDecimals - fromDecimals;\n    if (decimalDiff === 0) {\n        return value;\n    }\n    if (decimalDiff > 0) {\n        // Scale up: multiply\n        const multiplier = 10n ** BigInt(decimalDiff);\n        return value * multiplier;\n    }\n    else {\n        // Scale down: divide (with truncation)\n        const divisor = 10n ** BigInt(-decimalDiff);\n        return value / divisor;\n    }\n}\n/**\n * Trims trailing zeros from a decimal string for clean display.\n *\n * Rules:\n * - Remove trailing zeros after the decimal point\n * - Remove trailing decimal point if no digits remain\n * - Never round or hide precision\n *\n * Examples:\n * - \"0.500000000000\" → \"0.5\"\n * - \"0.250000\" → \"0.25\"\n * - \"0.428571428571000000\" → \"0.428571428571\"\n * - \"3.0\" → \"3\"\n * - \"0\" → \"0\"\n *\n * @param decimalString - The decimal string to trim\n * @returns Trimmed string\n */\nexport function trimTrailingZeros(decimalString) {\n    // If no decimal point, return as-is\n    if (!decimalString.includes('.')) {\n        return decimalString;\n    }\n    // Remove trailing zeros after decimal point\n    let trimmed = decimalString.replace(/\\.?0+$/, '');\n    // Handle edge case: if we removed everything after the decimal point\n    if (trimmed.endsWith('.')) {\n        trimmed = trimmed.slice(0, -1);\n    }\n    return trimmed;\n}\n//# sourceMappingURL=decimals.js.map","/**\n * SolCalc Evaluator\n *\n * This is the core evaluation engine that:\n * - Evaluates AST nodes recursively\n * - Applies decimal propagation rules\n * - Validates exponentiation restrictions\n * - Calculates final results with rounding\n */\nimport { ASTNodeType, DivisionByZeroError, UndefinedVariableError, MissingDecimalsError, InvalidExponentiationError, } from '../types.js';\nimport { multiplyDecimals, divideDecimals, addDecimals, subtractDecimals, formatWithDecimals, trimTrailingZeros, } from './decimals.js';\nimport { applyRounding, calculateRoundingLoss } from './rounding.js';\n/**\n * Evaluates an expression AST with given variable values.\n *\n * @param ast - The AST to evaluate\n * @param variables - Map of variable names to their values and decimals\n * @param roundingMode - Rounding mode to apply for division (default: floor)\n * @returns Evaluation result\n */\nexport function evaluate(ast, variables, roundingMode = 'floor') {\n    // Track type bounds used in the expression for overflow detection\n    const typeBounds = new Set();\n    // Evaluate the AST to get raw value and decimals\n    const result = evaluateNode(ast, variables, roundingMode, typeBounds);\n    // Format human-readable representation\n    const human = formatWithDecimals(result.value, result.decimals);\n    // Calculate Solidity-accurate result (no rounding if decimals already 0)\n    // For the \"solidity\" field, we don't change decimals - we just show what\n    // Solidity would produce. The rounding applies when scaling to a specific target.\n    const solidity = result.value;\n    // Calculate rounding loss from division remainder if present\n    let roundingLoss = '0';\n    if (result.divisionRemainder && result.divisionDivisor && result.divisionResultDecimals !== undefined) {\n        const rawLoss = calculateDivisionLoss(result.divisionRemainder, result.divisionDivisor, result.divisionResultDecimals, roundingMode);\n        // Trim trailing zeros for clean display (e.g., \"0.5\" instead of \"0.500000...\")\n        roundingLoss = trimTrailingZeros(rawLoss);\n    }\n    // Check for overflow/underflow if type bounds were used AND result is a pure scalar\n    // Only scalars (decimals = 0) can overflow in Solidity integer arithmetic\n    const warning = result.decimals === 0 ? detectOverflow(result.value, typeBounds) : undefined;\n    return {\n        raw: result.value,\n        decimals: result.decimals,\n        human,\n        solidity,\n        roundingLoss,\n        warning,\n    };\n}\n/**\n * Recursively evaluates an AST node.\n *\n * @param node - The AST node to evaluate\n * @param variables - Variable definitions\n * @param roundingMode - Rounding mode for division operations\n * @returns Evaluated value with decimals\n */\nfunction evaluateNode(node, variables, roundingMode, typeBounds) {\n    switch (node.type) {\n        case ASTNodeType.NUMBER_LITERAL:\n            return evaluateNumberLiteral(node);\n        case ASTNodeType.TYPE_BOUND_LITERAL:\n            return evaluateTypeBoundLiteral(node, typeBounds);\n        case ASTNodeType.IDENTIFIER:\n            return evaluateIdentifier(node, variables);\n        case ASTNodeType.BINARY_OP:\n            return evaluateBinaryOp(node, variables, roundingMode, typeBounds);\n        case ASTNodeType.EXPONENTIATION:\n            return evaluateExponentiation(node, variables, roundingMode, typeBounds);\n        default:\n            // This should never happen with proper TypeScript typing\n            throw new Error(`Unknown AST node type: ${node.type}`);\n    }\n}\n/**\n * Evaluates a number literal node.\n */\nfunction evaluateNumberLiteral(node) {\n    return {\n        value: node.value,\n        decimals: node.decimals, // Always 0 for literals\n    };\n}\n/**\n * Evaluates a type bound literal node.\n *\n * Type bounds are always scalars (decimals = 0).\n * If a typeBounds set is provided, track the type for overflow detection.\n */\nfunction evaluateTypeBoundLiteral(node, typeBounds) {\n    // Track the type bound for overflow detection\n    if (typeBounds) {\n        typeBounds.add(node.solidityType);\n    }\n    return {\n        value: node.value,\n        decimals: 0, // Type bounds are always scalars\n    };\n}\n/**\n * Evaluates an identifier (variable reference).\n */\nfunction evaluateIdentifier(node, variables) {\n    const variable = variables.get(node.name);\n    if (!variable) {\n        throw new UndefinedVariableError(node.name);\n    }\n    // Validate that decimals are set\n    if (variable.decimals === null || variable.decimals === undefined) {\n        throw new MissingDecimalsError(node.name);\n    }\n    if (variable.decimals < 0) {\n        throw new Error(`Variable \"${node.name}\" has negative decimals: ${variable.decimals}. Variables must have decimals >= 0.`);\n    }\n    return {\n        value: variable.value,\n        decimals: variable.decimals,\n    };\n}\n/**\n * Evaluates a binary operation (+, -, *, /).\n */\nfunction evaluateBinaryOp(node, variables, roundingMode, typeBounds) {\n    // Special handling for addition/subtraction with scalar literal coercion\n    if (node.operator === '+' || node.operator === '-') {\n        const left = evaluateNode(node.left, variables, roundingMode, typeBounds);\n        const right = evaluateNode(node.right, variables, roundingMode, typeBounds);\n        // Scalar literal coercion: if a literal scalar is added/subtracted with a fixed-point value,\n        // lift the scalar to match the fixed-point value's decimals.\n        // This makes \"1e18 + 1\" work intuitively (meaning \"add 1 wei\" not \"add 1 token\").\n        let finalLeft = left;\n        let finalRight = right;\n        // Check if left is a scalar literal (decimals=0 from a NumberLiteralNode)\n        const leftIsScalarLiteral = node.left.type === ASTNodeType.NUMBER_LITERAL && left.decimals === 0;\n        const rightIsScalarLiteral = node.right.type === ASTNodeType.NUMBER_LITERAL && right.decimals === 0;\n        // If left is a scalar literal and right has decimals, lift left\n        if (leftIsScalarLiteral && right.decimals > 0) {\n            finalLeft = {\n                ...left,\n                decimals: right.decimals, // Lift to match right's decimals\n            };\n        }\n        // If right is a scalar literal and left has decimals, lift right\n        else if (rightIsScalarLiteral && left.decimals > 0) {\n            finalRight = {\n                ...right,\n                decimals: left.decimals, // Lift to match left's decimals\n            };\n        }\n        // Perform the operation with potentially lifted values\n        if (node.operator === '+') {\n            return {\n                value: finalLeft.value + finalRight.value,\n                decimals: addDecimals(finalLeft.decimals, finalRight.decimals),\n            };\n        }\n        else {\n            return {\n                value: finalLeft.value - finalRight.value,\n                decimals: subtractDecimals(finalLeft.decimals, finalRight.decimals),\n            };\n        }\n    }\n    // For other operators (*, /), evaluate normally\n    const left = evaluateNode(node.left, variables, roundingMode, typeBounds);\n    const right = evaluateNode(node.right, variables, roundingMode, typeBounds);\n    if (node.operator === '*') {\n        return {\n            value: left.value * right.value,\n            decimals: multiplyDecimals(left.decimals, right.decimals),\n        };\n    }\n    if (node.operator === '/') {\n        if (right.value === 0n) {\n            throw new DivisionByZeroError();\n        }\n        const remainder = left.value % right.value;\n        let quotient;\n        // Apply rounding mode\n        if (roundingMode === 'floor') {\n            // Floor division (default BigInt behavior)\n            quotient = left.value / right.value;\n        }\n        else {\n            // Ceil division: (a + b - 1) / b\n            // Only apply ceil adjustment if there's a remainder\n            if (remainder === 0n) {\n                quotient = left.value / right.value;\n            }\n            else {\n                quotient = (left.value + right.value - 1n) / right.value;\n            }\n        }\n        const resultDecimals = divideDecimals(left.decimals, right.decimals);\n        return {\n            value: quotient,\n            decimals: resultDecimals,\n            // Track remainder for loss calculation\n            divisionRemainder: remainder !== 0n ? remainder : undefined,\n            divisionDivisor: remainder !== 0n ? right.value : undefined,\n            divisionResultDecimals: remainder !== 0n ? resultDecimals : undefined,\n        };\n    }\n    throw new Error(`Unknown operator: ${node.operator}`);\n}\n/**\n * Evaluates exponentiation with strict validation.\n *\n * CRITICAL RESTRICTION: Only `10 ** n` is allowed where:\n * - base must be literal 10\n * - exponent must evaluate to decimals = 0 (dimensionless)\n *\n * The result is ALWAYS a pure scalar with decimals = 0:\n * - value = 10^n (computed power)\n * - decimals = 0 (NOT a scaled value)\n *\n * This is a scale constructor, not fixed-point math.\n */\nfunction evaluateExponentiation(node, variables, roundingMode, typeBounds) {\n    // Validate that base is a literal 10\n    if (node.base.type !== ASTNodeType.NUMBER_LITERAL) {\n        throw new InvalidExponentiationError('base must be literal 10');\n    }\n    const baseNode = node.base;\n    if (baseNode.value !== 10n) {\n        throw new InvalidExponentiationError(`base must be 10, got ${baseNode.value}`);\n    }\n    // Evaluate the exponent\n    const exponent = evaluateNode(node.exponent, variables, roundingMode, typeBounds);\n    // Validate that exponent is dimensionless (decimals = 0)\n    if (exponent.decimals !== 0) {\n        throw new InvalidExponentiationError(`exponent must be dimensionless (decimals = 0), got decimals = ${exponent.decimals}`);\n    }\n    // Convert exponent value to number (must fit in JavaScript number range)\n    const exponentNum = Number(exponent.value);\n    if (!Number.isSafeInteger(exponentNum)) {\n        throw new InvalidExponentiationError(`exponent value too large: ${exponent.value}. Must fit in safe integer range.`);\n    }\n    // Validate non-negative exponent\n    if (exponentNum < 0) {\n        throw new InvalidExponentiationError(`exponent must be non-negative, got ${exponentNum}`);\n    }\n    // Compute power as scale constant: 10 ** n → {10^n, decimals: n}\n    // This represents \"1 with n decimals of precision\"\n    // In fixed-point: 10^n / 10^n = 1\n    // When dividing by this, we remove 10^n from raw AND subtract n from decimals\n    const powerValue = 10n ** BigInt(exponentNum);\n    return {\n        value: powerValue,\n        decimals: exponentNum,\n    };\n}\n/**\n * Evaluates an expression and scales the result to target decimals.\n *\n * This is used when the UI specifies expected output decimals.\n *\n * @param ast - The AST to evaluate\n * @param variables - Variable definitions\n * @param targetDecimals - Expected output decimals\n * @param roundingMode - Rounding mode to apply\n * @returns Evaluation result scaled to target decimals\n */\nexport function evaluateWithTargetDecimals(ast, variables, targetDecimals, roundingMode = 'floor') {\n    // Track type bounds for overflow detection\n    const typeBounds = new Set();\n    // Evaluate without scaling\n    const result = evaluateNode(ast, variables, roundingMode, typeBounds);\n    // Scale to target decimals with rounding\n    const scaledValue = applyRounding(result.value, result.decimals, targetDecimals, roundingMode);\n    // Calculate rounding loss\n    const loss = calculateRoundingLoss(result.value, scaledValue, result.decimals, targetDecimals);\n    // Format outputs\n    const raw = result.value;\n    const human = formatWithDecimals(result.value, result.decimals);\n    const solidity = scaledValue;\n    const roundingLoss = formatWithDecimals(loss, result.decimals);\n    // Check for overflow/underflow if type bounds were used AND result is a pure scalar\n    // Only scalars (decimals = 0) can overflow in Solidity integer arithmetic\n    const warning = result.decimals === 0 ? detectOverflow(result.value, typeBounds) : undefined;\n    return {\n        raw,\n        decimals: result.decimals,\n        human,\n        solidity,\n        roundingLoss,\n        warning,\n    };\n}\n/**\n * Calculates rounding loss from a division operation.\n *\n * When integer division has a non-zero remainder, this calculates the\n * fractional part that was lost due to truncation.\n *\n * Floor: loss = (remainder / divisor) / 10^resultDecimals (positive)\n * Ceil:  loss = -((divisor - remainder) / divisor) / 10^resultDecimals (negative)\n *\n * Example Floor: (3 * 1e18) / 7\n * - remainder = 3, divisor = 7, exact = 3.5, floor = 3\n * - loss = (3/7) / 10^18 ≈ +0.000000000000000428571...\n *\n * Example Ceil: 7 / 2\n * - remainder = 1, divisor = 2, exact = 3.5, ceil = 4\n * - loss = -(1/2) = -0.5 (over-allocation)\n *\n * @param remainder - The remainder from integer division\n * @param divisor - The divisor used in the division\n * @param resultDecimals - The decimal places in the result\n * @param roundingMode - The rounding mode applied\n * @returns Formatted loss as a decimal string\n */\nfunction calculateDivisionLoss(remainder, divisor, resultDecimals, roundingMode) {\n    if (remainder === 0n) {\n        return '0';\n    }\n    // For Floor: loss = remainder / divisor (positive - under-allocation)\n    // For Ceil: loss = -(divisor - remainder) / divisor (negative - over-allocation)\n    const lossNumerator = roundingMode === 'floor' ? remainder : -(divisor - remainder);\n    const isNegative = lossNumerator < 0n;\n    const absNumerator = isNegative ? -lossNumerator : lossNumerator;\n    // Calculate (lossNumerator / divisor) with high precision\n    const precision = 50; // 50 decimal places of precision\n    const scaledNumerator = absNumerator * (10n ** BigInt(precision));\n    const fractionWithPrecision = scaledNumerator / divisor;\n    // Format as decimal: fractionWithPrecision / 10^(precision + resultDecimals)\n    const formatted = formatWithDecimals(fractionWithPrecision, precision + resultDecimals);\n    // Add negative sign for ceil\n    return isNegative ? `-${formatted}` : formatted;\n}\n/**\n * Detects if a value would overflow/underflow any of the used Solidity types.\n *\n * Returns a warning if overflow is detected, otherwise undefined.\n *\n * @param value - The computed result value\n * @param typeBounds - Set of Solidity types used in the expression\n * @returns OverflowWarning if overflow detected, undefined otherwise\n */\nfunction detectOverflow(value, typeBounds) {\n    if (typeBounds.size === 0) {\n        return undefined;\n    }\n    // Check each type bound to see if the value overflows\n    for (const solidityType of typeBounds) {\n        const match = solidityType.match(/^(u?int)(\\d+)$/);\n        if (!match) {\n            continue;\n        }\n        const isSigned = match[1] === 'int';\n        const bits = parseInt(match[2], 10);\n        let min;\n        let max;\n        if (!isSigned) {\n            // Unsigned: uintX\n            min = 0n;\n            max = (2n ** BigInt(bits)) - 1n;\n        }\n        else {\n            // Signed: intX\n            min = -(2n ** BigInt(bits - 1));\n            max = (2n ** BigInt(bits - 1)) - 1n;\n        }\n        // Check if value is outside the range\n        if (value > max) {\n            // Overflow\n            const wrappedValue = calculateWrappedValue(value, bits, isSigned);\n            const wrappedHuman = wrappedValue.toString();\n            return {\n                solidityType,\n                kind: 'overflow',\n                wrappedValue,\n                wrappedHuman,\n            };\n        }\n        else if (value < min) {\n            // Underflow\n            const wrappedValue = calculateWrappedValue(value, bits, isSigned);\n            const wrappedHuman = wrappedValue.toString();\n            return {\n                solidityType,\n                kind: 'underflow',\n                wrappedValue,\n                wrappedHuman,\n            };\n        }\n    }\n    return undefined;\n}\n/**\n * Calculates the wrapped value according to Solidity semantics.\n *\n * Unsigned (uintX): wrapped = value mod (2^bits)\n * Signed (intX):   wrapped = ((value mod range) + range) mod range\n *                  then convert to signed representation\n *\n * @param value - The value that overflows\n * @param bits - The bit size of the type\n * @param isSigned - Whether the type is signed\n * @returns The wrapped value\n */\nfunction calculateWrappedValue(value, bits, isSigned) {\n    const range = 2n ** BigInt(bits);\n    if (!isSigned) {\n        // Unsigned: simple modulo\n        let wrapped = value % range;\n        // Handle negative values (bring into positive range)\n        if (wrapped < 0n) {\n            wrapped += range;\n        }\n        return wrapped;\n    }\n    else {\n        // Signed: wrap to unsigned first, then convert to signed representation\n        let wrappedUnsigned = value % range;\n        if (wrappedUnsigned < 0n) {\n            wrappedUnsigned += range;\n        }\n        // Convert to signed representation\n        const half = 2n ** BigInt(bits - 1);\n        if (wrappedUnsigned >= half) {\n            return wrappedUnsigned - range;\n        }\n        else {\n            return wrappedUnsigned;\n        }\n    }\n}\n/**\n * Evaluates a comparison expression (Phase 2).\n *\n * CRITICAL: This is called AFTER Phase 1 (numeric evaluation).\n * Both sides must:\n * - Evaluate successfully to numeric values\n * - Have matching decimal scales\n *\n * @param node - The comparison AST node\n * @param variables - Variable definitions\n * @param roundingMode - Rounding mode (passed to Phase 1)\n * @returns Comparison result (boolean)\n */\nexport function evaluateComparison(node, variables, roundingMode = 'floor') {\n    // Phase 1: Evaluate both sides as numeric expressions\n    const leftResult = evaluate(node.left, variables, roundingMode);\n    const rightResult = evaluate(node.right, variables, roundingMode);\n    // Auto-normalize if decimals don't match (comparison-mode only)\n    // This handles edge cases like comparing with negative decimals\n    let leftValue = leftResult.raw;\n    let rightValue = rightResult.raw;\n    let targetDecimals = leftResult.decimals;\n    if (leftResult.decimals !== rightResult.decimals) {\n        // Normalize both sides to the higher (more precise) decimal scale\n        targetDecimals = Math.max(leftResult.decimals, rightResult.decimals);\n        if (leftResult.decimals < targetDecimals) {\n            // Scale left value up\n            const scaleFactor = 10n ** BigInt(targetDecimals - leftResult.decimals);\n            leftValue = leftResult.raw * scaleFactor;\n        }\n        if (rightResult.decimals < targetDecimals) {\n            // Scale right value up\n            const scaleFactor = 10n ** BigInt(targetDecimals - rightResult.decimals);\n            rightValue = rightResult.raw * scaleFactor;\n        }\n    }\n    // Perform the comparison using normalized values\n    let result;\n    switch (node.operator) {\n        case '==':\n            result = leftValue === rightValue;\n            break;\n        case '!=':\n            result = leftValue !== rightValue;\n            break;\n        case '<':\n            result = leftValue < rightValue;\n            break;\n        case '<=':\n            result = leftValue <= rightValue;\n            break;\n        case '>':\n            result = leftValue > rightValue;\n            break;\n        case '>=':\n            result = leftValue >= rightValue;\n            break;\n        default:\n            throw new Error(`Unknown comparison operator: ${node.operator}`);\n    }\n    // Return comparison result\n    return {\n        result,\n        operator: node.operator,\n        leftHuman: leftResult.human,\n        rightHuman: rightResult.human,\n        decimals: targetDecimals,\n        // Preserve overflow warning if present\n        warning: leftResult.warning || rightResult.warning,\n    };\n}\n//# sourceMappingURL=evaluate.js.map","/**\n * SolCalc Core Engine\n *\n * Public API for the SolCalc calculation engine.\n * This is the only file that UI and extension code should import from.\n */\n// Re-export errors\nexport { SolCalcError, ParseError, EvaluationError, DecimalMismatchError, InvalidExponentiationError, DivisionByZeroError, UndefinedVariableError, MissingDecimalsError, ComparisonError, ComparisonDecimalMismatchError, } from './types.js';\n// Re-export core functions\nexport { tokenize } from './parser/tokenize.js';\nexport { parse } from './parser/parse.js';\nexport { evaluate, evaluateWithTargetDecimals, evaluateComparison } from './evaluator/evaluate.js';\nexport { formatWithDecimals } from './evaluator/decimals.js';\nimport { tokenize } from './parser/tokenize.js';\nimport { parse } from './parser/parse.js';\nimport { evaluate, evaluateWithTargetDecimals, evaluateComparison } from './evaluator/evaluate.js';\nimport { ASTNodeType } from './types.js';\n/**\n * High-level function to evaluate an expression string.\n *\n * This is the main entry point for simple evaluation.\n *\n * TWO-PHASE EVALUATION:\n * - If expression contains a comparison operator (==, !=, <, <=, >, >=):\n *   Returns ComparisonResult (boolean result)\n * - Otherwise:\n *   Returns EvaluationResult (numeric result)\n *\n * @param expression - The expression to evaluate\n * @param variables - Map of variable names to their definitions\n * @param roundingMode - Rounding mode for division (default: 'floor')\n * @returns Evaluation result (numeric) or Comparison result (boolean)\n */\nexport function evaluateExpression(expression, variables, roundingMode = 'floor') {\n    const tokens = tokenize(expression);\n    const ast = parse(tokens);\n    // Check if this is a comparison expression (Phase 2)\n    if (ast.type === ASTNodeType.COMPARISON) {\n        return evaluateComparison(ast, variables, roundingMode);\n    }\n    // Otherwise, evaluate as numeric expression (Phase 1)\n    return evaluate(ast, variables, roundingMode);\n}\n/**\n * High-level function to evaluate an expression with target decimals.\n *\n * @param expression - The expression to evaluate\n * @param variables - Map of variable names to their definitions\n * @param targetDecimals - Expected output decimals\n * @param roundingMode - Rounding mode (default: 'floor')\n * @returns Evaluation result scaled to target decimals\n */\nexport function evaluateExpressionWithTarget(expression, variables, targetDecimals, roundingMode = 'floor') {\n    const tokens = tokenize(expression);\n    const ast = parse(tokens);\n    return evaluateWithTargetDecimals(ast, variables, targetDecimals, roundingMode);\n}\n/**\n * Extracts variable names from an expression.\n *\n * This is useful for the UI to know which variables need values/decimals.\n *\n * @param expression - The expression to analyze\n * @returns Set of variable names found in the expression\n */\nexport function extractVariables(expression) {\n    try {\n        const tokens = tokenize(expression);\n        const ast = parse(tokens);\n        return extractVariablesFromAST(ast);\n    }\n    catch {\n        // If parsing fails, return empty set\n        return new Set();\n    }\n}\n/**\n * Recursively extracts variable names from an AST.\n */\nfunction extractVariablesFromAST(node) {\n    const variables = new Set();\n    function visit(n) {\n        if (n.type === ASTNodeType.IDENTIFIER) {\n            variables.add(n.name);\n        }\n        else if (n.type === ASTNodeType.BINARY_OP) {\n            const binOp = n;\n            visit(binOp.left);\n            visit(binOp.right);\n        }\n        else if (n.type === ASTNodeType.EXPONENTIATION) {\n            const exp = n;\n            visit(exp.base);\n            visit(exp.exponent);\n        }\n        else if (n.type === ASTNodeType.COMPARISON) {\n            const comp = n;\n            visit(comp.left);\n            visit(comp.right);\n        }\n        // NUMBER_LITERAL and TYPE_BOUND_LITERAL have no children to visit\n    }\n    visit(node);\n    return variables;\n}\n//# sourceMappingURL=index.js.map","/**\n * Calculator State Management\n *\n * Uses React Context for simple, centralized state.\n * Integrates with the core engine for evaluation.\n */\n\nimport React, { createContext, useContext, useState, useCallback, useEffect } from 'react';\nimport { evaluateExpression, extractVariables, type Variable, type RoundingMode } from '@solcalc/core';\nimport type { CalculatorState, CalculatorActions, VariableInput, Theme } from './types';\n\nconst CalculatorContext = createContext<(CalculatorState & CalculatorActions) | null>(null);\n\nexport function CalculatorProvider({ children }: { children: React.ReactNode }) {\n  // Initialize theme from localStorage or default to dark\n  const [theme, setThemeState] = useState<Theme>(() => {\n    const saved = localStorage.getItem('solcalc-theme');\n    return (saved === 'light' || saved === 'dark') ? saved : 'dark';\n  });\n\n  const [expression, setExpressionState] = useState('');\n  const [roundingMode, setRoundingMode] = useState<RoundingMode>('floor');\n  const [variables, setVariables] = useState<Map<string, VariableInput>>(new Map());\n  const [result, setResult] = useState<CalculatorState['result']>(null);\n  const [error, setError] = useState<string | null>(null);\n  const [isEvaluating, setIsEvaluating] = useState(false);\n\n  // Apply theme to document root\n  useEffect(() => {\n    document.documentElement.setAttribute('data-theme', theme);\n    localStorage.setItem('solcalc-theme', theme);\n  }, [theme]);\n\n  const setTheme = useCallback((newTheme: Theme) => {\n    setThemeState(newTheme);\n  }, []);\n\n  // Auto-detect variables when expression changes\n  const setExpression = useCallback((newExpression: string) => {\n    setExpressionState(newExpression);\n\n    // Extract variables from the new expression\n    const detectedVars = extractVariables(newExpression);\n\n    setVariables((prevVars) => {\n      const newVars = new Map(prevVars);\n\n      // Remove variables no longer in the expression\n      for (const varName of newVars.keys()) {\n        if (!detectedVars.has(varName)) {\n          newVars.delete(varName);\n        }\n      }\n\n      // Add new variables (no default decimals)\n      for (const varName of detectedVars) {\n        if (!newVars.has(varName)) {\n          newVars.set(varName, {\n            name: varName,\n            value: '',\n            decimals: '',\n          });\n        }\n      }\n\n      return newVars;\n    });\n  }, []);\n\n  // Set variable value\n  const setVariableValue = useCallback((name: string, value: string) => {\n    setVariables((prev) => {\n      const newVars = new Map(prev);\n      const existing = newVars.get(name);\n      if (existing) {\n        newVars.set(name, { ...existing, value });\n      }\n      return newVars;\n    });\n  }, []);\n\n  // Set variable decimals\n  const setVariableDecimals = useCallback((name: string, decimals: string) => {\n    setVariables((prev) => {\n      const newVars = new Map(prev);\n      const existing = newVars.get(name);\n      if (existing) {\n        newVars.set(name, { ...existing, decimals });\n      }\n      return newVars;\n    });\n  }, []);\n\n  // Evaluate expression\n  const evaluate = useCallback(() => {\n    setIsEvaluating(true);\n    setError(null);\n    setResult(null);\n\n    try {\n      // Convert VariableInput to Variable (with validation)\n      const coreVariables = new Map<string, Variable>();\n\n      for (const [name, varInput] of variables) {\n        // Validate that value and decimals are set\n        if (varInput.value === '') {\n          throw new Error(`Variable \"${name}\" is missing a value`);\n        }\n        if (varInput.decimals === '') {\n          throw new Error(`Variable \"${name}\" is missing decimals`);\n        }\n\n        // Parse decimals\n        const decimals = parseInt(varInput.decimals, 10);\n        if (isNaN(decimals) || decimals < 0) {\n          throw new Error(`Variable \"${name}\" has invalid decimals: ${varInput.decimals}`);\n        }\n\n        // Convert human-readable value to raw bigint\n        // User enters \"2.5\", we convert to 2.5 × 10^decimals\n        const humanValue = parseFloat(varInput.value);\n        if (isNaN(humanValue)) {\n          throw new Error(`Variable \"${name}\" has invalid value: ${varInput.value}`);\n        }\n\n        // Calculate raw value: humanValue × 10^decimals\n        // Handle decimal inputs by scaling up\n        const scaleFactor = 10 ** decimals;\n        const rawValue = BigInt(Math.round(humanValue * scaleFactor));\n\n        coreVariables.set(name, { name, value: rawValue, decimals });\n      }\n\n      // Evaluate using core engine with rounding mode\n      const evalResult = evaluateExpression(expression, coreVariables, roundingMode);\n      setResult(evalResult);\n    } catch (err) {\n      if (err instanceof Error) {\n        setError(err.message);\n      } else {\n        setError(String(err));\n      }\n    } finally {\n      setIsEvaluating(false);\n    }\n  }, [expression, variables, roundingMode]);\n\n  // Auto-evaluate when inputs change (with debounce)\n  useEffect(() => {\n    if (!expression) {\n      setResult(null);\n      setError(null);\n      return;\n    }\n\n    // Check if all variables have values and decimals\n    let allSet = true;\n    for (const varInput of variables.values()) {\n      if (varInput.value === '' || varInput.decimals === '') {\n        allSet = false;\n        break;\n      }\n    }\n\n    if (!allSet) {\n      setResult(null);\n      setError(null);\n      return;\n    }\n\n    // Debounce evaluation\n    const timeout = setTimeout(() => {\n      evaluate();\n    }, 300);\n\n    return () => clearTimeout(timeout);\n  }, [expression, variables, evaluate]);\n\n  const value: CalculatorState & CalculatorActions = {\n    // State\n    expression,\n    roundingMode,\n    variables,\n    theme,\n    result,\n    error,\n    isEvaluating,\n\n    // Actions\n    setExpression,\n    setRoundingMode,\n    setVariableValue,\n    setVariableDecimals,\n    setTheme,\n    evaluate,\n  };\n\n  return (\n    <CalculatorContext.Provider value={value}>\n      {children}\n    </CalculatorContext.Provider>\n  );\n}\n\nexport function useCalculator() {\n  const context = useContext(CalculatorContext);\n  if (!context) {\n    throw new Error('useCalculator must be used within CalculatorProvider');\n  }\n  return context;\n}\n","/**\n * Toolbar Component\n *\n * Contains:\n * - Rounding selector (Floor, Ceil)\n * - Guide button\n */\n\nimport { useCalculator } from '../state/store';\nimport type { RoundingMode } from '@solcalc/core';\nimport './Toolbar.css';\n\ninterface ToolbarProps {\n  onGuideClick: () => void;\n}\n\nexport function Toolbar({ onGuideClick }: ToolbarProps) {\n  const { roundingMode, setRoundingMode } = useCalculator();\n\n  return (\n    <div className=\"toolbar\">\n      <div className=\"toolbar-controls\">\n        <label>\n          Rounding\n          <select\n            value={roundingMode}\n            onChange={(e) => setRoundingMode(e.target.value as RoundingMode)}\n          >\n            <option value=\"floor\">Floor</option>\n            <option value=\"ceil\">Ceil</option>\n          </select>\n        </label>\n      </div>\n\n      <button\n        className=\"guide-button\"\n        onClick={onGuideClick}\n        title=\"Open SolCalc Guidelines\"\n      >\n        Guide ?\n      </button>\n    </div>\n  );\n}\n","/**\n * Expression Component\n *\n * Contains:\n * - Multiline textarea for expression input\n */\n\nimport { useCalculator } from '../state/store';\nimport './Expression.css';\n\nexport function Expression() {\n  const { expression, setExpression } = useCalculator();\n\n  return (\n    <div className=\"expression-section\">\n      <div className=\"expression-header\">\n        <label htmlFor=\"expression\">Expression</label>\n      </div>\n\n      <textarea\n        id=\"expression\"\n        className=\"expression-input mono\"\n        value={expression}\n        onChange={(e) => setExpression(e.target.value)}\n        placeholder=\"Enter expression (e.g., amount * price / 1e18)\"\n        rows={3}\n        spellCheck={false}\n      />\n    </div>\n  );\n}\n","/**\n * Variables Component\n *\n * Displays flat rows for each detected variable:\n * - Variable name (read-only)\n * - Value input\n * - Decimals input\n */\n\nimport { useCalculator } from '../state/store';\nimport './Variables.css';\n\nexport function Variables() {\n  const {\n    variables,\n    setVariableValue,\n    setVariableDecimals,\n  } = useCalculator();\n\n  const varArray = Array.from(variables.values());\n\n  if (varArray.length === 0) {\n    return null;\n  }\n\n  return (\n    <div className=\"variables-section\">\n      <div className=\"variables-header\">\n        <span>Variables</span>\n      </div>\n\n      <div className=\"variables-list\">\n        {varArray.map((variable) => (\n          <div key={variable.name} className=\"variable-row\">\n            <div className=\"variable-name mono\">{variable.name}</div>\n            <input\n              type=\"text\"\n              className=\"variable-value mono\"\n              value={variable.value}\n              onChange={(e) => setVariableValue(variable.name, e.target.value)}\n              placeholder=\"value\"\n            />\n            <label className=\"variable-decimals-label text-secondary\">\n              dec\n              <input\n                type=\"number\"\n                className=\"variable-decimals mono\"\n                value={variable.decimals}\n                onChange={(e) => setVariableDecimals(variable.name, e.target.value)}\n                placeholder=\"--\"\n                min=\"0\"\n              />\n            </label>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n","/**\n * Results Component\n *\n * Displays evaluation results in console-style output:\n * - Raw (integer value)\n * - Human (decimal-adjusted)\n * - Solidity (rounded)\n * - Loss (rounding loss)\n *\n * Also shows errors if evaluation fails\n */\n\nimport { useCalculator } from '../state/store';\nimport './Results.css';\n\n// Type guard to check if result is a comparison result\nfunction isComparisonResult(result: any): result is { result: boolean; operator: string; leftHuman: string; rightHuman: string; decimals: number; warning?: any } {\n  return 'result' in result && 'operator' in result && typeof result.result === 'boolean';\n}\n\nexport function Results() {\n  const { result, error } = useCalculator();\n\n  if (error) {\n    return (\n      <div className=\"results-section\">\n        <div className=\"results-label\">Error</div>\n        <div className=\"results-output\">\n          <div className=\"result-error text-error\">{error}</div>\n        </div>\n      </div>\n    );\n  }\n\n  if (!result) {\n    return null;\n  }\n\n  // Handle comparison results differently\n  if (isComparisonResult(result)) {\n    const hasOverflow = result.warning !== undefined;\n\n    return (\n      <div className=\"results-section\">\n        <div className=\"results-label\">Comparison Result</div>\n        <div className={`results-output mono ${hasOverflow ? 'results-overflow' : ''}`}>\n          <div className=\"result-line\">\n            <span className=\"result-key\">Result:</span>\n            <span className={`result-value ${result.result ? 'text-success' : 'text-error'}`}>\n              {result.result ? 'true' : 'false'}\n            </span>\n          </div>\n          <div className=\"result-line\">\n            <span className=\"result-key\">Operator:</span>\n            <span className=\"result-value\">{result.operator}</span>\n          </div>\n          <div className=\"result-line\">\n            <span className=\"result-key\">Left:</span>\n            <span className=\"result-value\">{result.leftHuman}</span>\n          </div>\n          <div className=\"result-line\">\n            <span className=\"result-key\">Right:</span>\n            <span className=\"result-value\">{result.rightHuman}</span>\n          </div>\n          <div className=\"result-line text-secondary\">\n            <span className=\"result-key\">Decimals:</span>\n            <span className=\"result-value\">{result.decimals}</span>\n          </div>\n        </div>\n\n        {/* Overflow Information Panel */}\n        {result.warning && (\n          <div className=\"overflow-panel\">\n            <div className=\"overflow-warning\">\n              <span className=\"overflow-icon\">⚠️</span>\n              <span>\n                Arithmetic {result.warning.kind} detected in {result.warning.solidityType} —\n                computation exceeds the {result.warning.kind === 'overflow' ? 'maximum' : 'minimum'} value\n                representable by {result.warning.solidityType}. Solidity arithmetic wraps modulo 2^\n                {result.warning.solidityType.match(/\\d+/)?.[0] || '256'}.\n              </span>\n            </div>\n            <div className=\"overflow-wrapped\">\n              <span className=\"overflow-wrapped-label\">Wrapped Solidity Result:</span>\n              <span className=\"overflow-wrapped-value mono\">{result.warning.wrappedHuman}</span>\n            </div>\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  const hasOverflow = result.warning !== undefined;\n\n  // For scalar type bound expressions (decimals=0 with type bounds)\n  // Show simplified display\n  const isScalarTypeBound = result.decimals === 0 && hasOverflow;\n\n  return (\n    <div className=\"results-section\">\n      <div className=\"results-label\">Result</div>\n      <div className={`results-output mono ${hasOverflow ? 'results-overflow' : ''}`}>\n        {isScalarTypeBound ? (\n          // Simplified display for type bound scalar expressions\n          <>\n            <div className=\"result-line\">\n              <span className=\"result-key\">Value:</span>\n              <span className=\"result-value\">{result.raw.toString()}</span>\n            </div>\n            {result.warning && (\n              <div className=\"result-line\">\n                <span className=\"result-key\">Type:</span>\n                <span className=\"result-value\">{result.warning.solidityType}</span>\n              </div>\n            )}\n            <div className=\"result-line text-secondary\">\n              <span className=\"result-key\">Decimals:</span>\n              <span className=\"result-value\">{result.decimals}</span>\n            </div>\n          </>\n        ) : (\n          // Full display for mixed-decimal expressions\n          <>\n            <div className=\"result-line\">\n              <span className=\"result-key\">Raw:</span>\n              <span className=\"result-value\">{result.raw.toString()}</span>\n            </div>\n            <div className=\"result-line\">\n              <span className=\"result-key\">Human:</span>\n              <span className=\"result-value\">{result.human}</span>\n            </div>\n            <div className=\"result-line\">\n              <span className=\"result-key\">Solidity:</span>\n              <span className=\"result-value\">{result.solidity.toString()}</span>\n            </div>\n            <div className=\"result-line\">\n              <span className=\"result-key\">Loss:</span>\n              <span className=\"result-value\">{result.roundingLoss}</span>\n            </div>\n            {/* Only show decimals if non-negative (negative decimals are internal edge case) */}\n            {result.decimals >= 0 && (\n              <div className=\"result-line text-secondary\">\n                <span className=\"result-key\">Decimals:</span>\n                <span className=\"result-value\">{result.decimals}</span>\n              </div>\n            )}\n          </>\n        )}\n      </div>\n\n      {/* Overflow Information Panel */}\n      {result.warning && (\n        <div className=\"overflow-panel\">\n          <div className=\"overflow-warning\">\n            <span className=\"overflow-icon\">⚠️</span>\n            <span>\n              Arithmetic {result.warning.kind} detected in {result.warning.solidityType} —\n              computation exceeds the {result.warning.kind === 'overflow' ? 'maximum' : 'minimum'} value\n              representable by {result.warning.solidityType}. Solidity arithmetic wraps modulo 2^\n              {result.warning.solidityType.match(/\\d+/)?.[0] || '256'}.\n            </span>\n          </div>\n          <div className=\"overflow-wrapped\">\n            <span className=\"overflow-wrapped-label\">Wrapped Solidity Result:</span>\n            <span className=\"overflow-wrapped-value mono\">{result.warning.wrappedHuman}</span>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","/**\n * Footer Component\n *\n * Contains:\n * - Status indicator (auto-evaluating)\n * - Evaluate button with keyboard hint\n */\n\nimport { useCalculator } from '../state/store';\nimport './Footer.css';\n\nexport function Footer() {\n  const { evaluate, isEvaluating } = useCalculator();\n\n  return (\n    <div className=\"footer-container\">\n      <div className=\"footer\">\n        <div className=\"footer-status\">\n          <span className=\"status-indicator\" />\n          <span className=\"text-secondary\">Auto-evaluating</span>\n        </div>\n\n        <button className=\"evaluate-button primary\" onClick={evaluate} disabled={isEvaluating}>\n          Evaluate ↵\n        </button>\n      </div>\n\n      <div className=\"footer-credit\">\n        <span className=\"text-secondary\">\n          Created by{' '}\n          <a\n            href=\"https://x.com/32bits_Toby\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            className=\"credit-link\"\n          >\n            32bits-toby\n          </a>\n        </span>\n      </div>\n    </div>\n  );\n}\n","/**\n * Guideline Data\n *\n * Contains all 46 guidelines organized into 11 sections.\n * Each guideline includes: title, rule, explanation, examples, and audit relevance.\n */\n\nexport interface GuidelineExample {\n  code: string;\n  label?: string;\n}\n\nexport interface Guideline {\n  id: string;\n  title: string;\n  rule: string;\n  explanation: string;\n  examples: GuidelineExample[];\n  auditRelevance: string;\n}\n\nexport interface GuidelineSection {\n  id: string;\n  title: string;\n  guidelines: Guideline[];\n}\n\nexport const GUIDELINES: GuidelineSection[] = [\n  {\n    id: 'getting-started',\n    title: 'Getting Started',\n    guidelines: [\n      {\n        id: 'gs-1',\n        title: 'What is SolCalc?',\n        rule: 'SolCalc is a mixed-decimal calculator that mimics Solidity\\'s integer-only arithmetic with explicit decimal tracking.',\n        explanation: 'Solidity does not have floating-point types. All token amounts are stored as integers with an implied decimal place. For example, 1 USDC (6 decimals) is stored as 1000000. SolCalc helps you verify calculations across different decimal precisions without manual conversion.',\n        examples: [\n          { code: '1000000 with 6 decimals → 1.0 USDC', label: 'USDC representation' },\n          { code: '1000000000000000000 with 18 decimals → 1.0 ETH', label: 'ETH representation' },\n        ],\n        auditRelevance: 'Understanding fixed-point representation is fundamental to auditing DeFi protocols. Misunderstanding decimal places is a common source of critical vulnerabilities.',\n      },\n      {\n        id: 'gs-2',\n        title: 'Human-Readable Input',\n        rule: 'When you enter a value like \"2\" with decimals \"18\", SolCalc automatically converts it to 2000000000000000000.',\n        explanation: 'You don\\'t need to type out the full integer representation. Enter the human-readable value (e.g., \"2.5\") and specify the decimal precision. SolCalc handles the conversion to the underlying integer.',\n        examples: [\n          { code: 'Input: value=2, decimals=18 → 2000000000000000000', label: 'Simple conversion' },\n          { code: 'Input: value=1.5, decimals=6 → 1500000', label: 'USDC amount' },\n        ],\n        auditRelevance: 'This mirrors how users think about token amounts (human terms) vs. how contracts store them (integer terms). Auditors must verify conversions happen correctly.',\n      },\n      {\n        id: 'gs-3',\n        title: 'Variables vs. Literals',\n        rule: 'Variables are defined explicitly with a value and decimal precision. Literals in expressions inherit decimals from context.',\n        explanation: 'Variables like \"x\" require you to specify both value and decimals. Scalar literals (plain integers like \"1\" or \"100\") automatically adapt to match the decimal precision of other operands in addition/subtraction.',\n        examples: [\n          { code: 'x = 1000000000000000000 (18 decimals)\\n1e18 + 1 → auto-lifts 1 to 18 decimals', label: 'Scalar auto-lifting' },\n          { code: 'x + y requires x.decimals == y.decimals', label: 'Variable constraint' },\n        ],\n        auditRelevance: 'Incorrect decimal assumptions cause precision loss bugs. Verify that scalar constants are scaled correctly in contract code.',\n      },\n      {\n        id: 'gs-4',\n        title: 'Rounding Modes',\n        rule: 'SolCalc supports Floor (round down) and Ceil (round up) rounding modes, matching Solidity\\'s division behavior.',\n        explanation: 'Solidity\\'s native division always rounds down (floor). Many DeFi protocols implement custom ceil division for fair rounding. SolCalc shows both results and the precision loss.',\n        examples: [\n          { code: '7 / 2 (Floor) → 3, Loss: 0.5', label: 'Floor mode' },\n          { code: '7 / 2 (Ceil) → 4, Loss: -0.5', label: 'Ceil mode' },\n        ],\n        auditRelevance: 'Rounding direction determines who loses value in divisions. Floor favors the protocol (user loses dust). Ceil favors the user (protocol loses dust). Verify which is intended.',\n      },\n    ],\n  },\n  {\n    id: 'core-decimal-rules',\n    title: 'Core Decimal Rules',\n    guidelines: [\n      {\n        id: 'cdr-1',\n        title: 'Multiplication Adds Decimals',\n        rule: 'When you multiply two values, their decimal precisions add together.',\n        explanation: 'Multiplying (a × 10^d1) by (b × 10^d2) gives (a×b × 10^(d1+d2)). This is fundamental to fixed-point arithmetic. You often need to scale down afterward.',\n        examples: [\n          { code: '(2 * 1e18) * (3 * 1e18) → 6 * 1e36', label: 'Decimals add: 18 + 18 = 36' },\n          { code: 'price (6 decimals) * amount (18 decimals) → 24 decimals', label: 'Mixed decimals' },\n        ],\n        auditRelevance: 'Forgetting to scale down after multiplication is a classic bug. Result may overflow or have wrong precision. Always verify the scaling factor matches the intended output decimals.',\n      },\n      {\n        id: 'cdr-2',\n        title: 'Division Subtracts Decimals',\n        rule: 'When you divide two values, the result\\'s decimals = numerator decimals - denominator decimals.',\n        explanation: 'Dividing (a × 10^d1) by (b × 10^d2) gives (a/b × 10^(d1-d2)). If the denominator has more decimals than the numerator, the result will have negative conceptual decimals (very small number).',\n        examples: [\n          { code: '(6 * 1e36) / (3 * 1e18) → 2 * 1e18', label: 'Decimals subtract: 36 - 18 = 18' },\n          { code: '(amount * price) / 1e18 → scales back to token decimals', label: 'Common pattern' },\n        ],\n        auditRelevance: 'Division without proper scaling causes precision loss. Verify that divisions scale numerator up before dividing (multiply by precision factor first) to preserve significant digits.',\n      },\n      {\n        id: 'cdr-3',\n        title: 'Addition/Subtraction Requires Matching Decimals',\n        rule: 'You can only add or subtract values with the same decimal precision (except scalar literals).',\n        explanation: 'Adding 1 ETH (18 decimals) to 1 USDC (6 decimals) is meaningless without conversion. SolCalc enforces this constraint to prevent logic errors.',\n        examples: [\n          { code: '(2 * 1e18) + (3 * 1e18) → 5 * 1e18 ✓', label: 'Valid: same decimals' },\n          { code: '(2 * 1e18) + (3 * 1e6) → Error ✗', label: 'Invalid: mismatched decimals' },\n        ],\n        auditRelevance: 'Mismatched decimal addition is a critical bug. Always verify that operands are scaled to the same precision before addition/subtraction. Check for missing conversions.',\n      },\n      {\n        id: 'cdr-4',\n        title: 'Scalar Literal Auto-Lifting',\n        rule: 'Plain integer literals (like \"1\" or \"100\") automatically adopt the decimal precision of the other operand in addition/subtraction.',\n        explanation: 'This makes expressions like \"1e18 + 1\" work intuitively (adding 1 wei, not 1 token). Only applies to literals, not variables. Only applies to +/- operations.',\n        examples: [\n          { code: '1e18 + 1 → (1 * 1e18) + (1 * 1e18) = 2 * 1e18', label: 'Auto-lift: 1 becomes 1e18' },\n          { code: 'x + 1 where x has 6 decimals → 1 becomes 1e6', label: 'Adapts to variable decimals' },\n        ],\n        auditRelevance: 'Contracts often add small constants (fees, dust). Verify that these constants are scaled correctly. SolCalc\\'s auto-lifting mirrors Solidity\\'s implicit casting behavior.',\n      },\n      {\n        id: 'cdr-5',\n        title: 'Variables Do NOT Auto-Lift',\n        rule: 'Variables defined with explicit decimals never auto-lift, even in addition/subtraction.',\n        explanation: 'Auto-lifting only applies to literals. If you define x=1 (6 decimals) and y=1 (18 decimals), you cannot add them. This prevents accidental mismatches.',\n        examples: [\n          { code: 'x (6 decimals) + y (18 decimals) → Error ✗', label: 'Variables must match' },\n          { code: 'x + 1 (where x has 6 decimals) → 1 auto-lifts to 6 decimals ✓', label: 'Literal adapts' },\n        ],\n        auditRelevance: 'Contracts must explicitly convert variables to matching decimals. Look for missing scaling multiplications when different token types interact.',\n      },\n    ],\n  },\n  {\n    id: 'powers-scaling',\n    title: 'Powers & Scaling',\n    guidelines: [\n      {\n        id: 'ps-1',\n        title: 'Scale Constants (1e18, 1e6)',\n        rule: '1e18 is a scale constant representing \"1.0 with 18 decimal places\" (value = 10^18, decimals = 18).',\n        explanation: 'In Solidity, 1e18 is shorthand for 1000000000000000000. SolCalc treats this as a properly-scaled fixed-point number, not as scientific notation.',\n        examples: [\n          { code: '1e18 → value=1000000000000000000, decimals=18', label: 'WAD constant' },\n          { code: '1e6 → value=1000000, decimals=6', label: 'USDC scale' },\n        ],\n        auditRelevance: 'Scale constants are used everywhere in DeFi. Verify that divisions by 1e18 correctly de-scale results. Missing or double-scaling causes magnitude errors.',\n      },\n      {\n        id: 'ps-2',\n        title: 'Dynamic Exponentiation (10 ** n)',\n        rule: '10 ** n produces a scale constant where n must be a dimensionless integer (decimals = 0).',\n        explanation: 'Allows computing scale factors dynamically, e.g., 10 ** tokenDecimals. The exponent must be a pure integer with no fractional part.',\n        examples: [\n          { code: '10 ** 18 → same as 1e18', label: 'Static exponent' },\n          { code: '10 ** (decimals - 6) → dynamic scaling', label: 'Variable exponent' },\n        ],\n        auditRelevance: 'Dynamic scaling is common when handling multiple token types. Verify that exponent calculations are correct and that the base is always 10.',\n      },\n      {\n        id: 'ps-3',\n        title: 'Only Base-10 Exponentiation',\n        rule: 'SolCalc only supports 10 ** n. Other bases (2 ** n, x ** y) are not allowed.',\n        explanation: 'Restricting to base-10 prevents ambiguity in decimal tracking. General exponentiation would require complex decimal inference rules.',\n        examples: [\n          { code: '10 ** 18 → Allowed ✓', label: 'Base-10' },\n          { code: '2 ** 256 → Not Allowed ✗', label: 'Other base' },\n        ],\n        auditRelevance: 'Contracts rarely use non-base-10 exponentiation for financial calculations. If you see x ** y, verify it\\'s not a decimal-scaled value being exponentiated.',\n      },\n      {\n        id: 'ps-4',\n        title: 'Scaling Down After Multiplication',\n        rule: 'After multiplying two scaled values, divide by the scale constant to restore original precision.',\n        explanation: 'Multiplying two 18-decimal values gives 36 decimals. You must divide by 1e18 to get back to 18 decimals. This is the \"mul-div\" pattern.',\n        examples: [\n          { code: '(a * b) / 1e18 → restore to 18 decimals', label: 'Standard WAD math' },\n          { code: '(price * amount) / 1e18 → token amount', label: 'Price calculation' },\n        ],\n        auditRelevance: 'Forgetting to scale down causes overflow or wrong magnitude. Verify every multiplication is followed by appropriate division.',\n      },\n    ],\n  },\n  {\n    id: 'rounding-loss',\n    title: 'Rounding & Loss',\n    guidelines: [\n      {\n        id: 'rl-1',\n        title: 'Floor Division (Round Down)',\n        rule: 'Floor mode rounds division results down to the nearest integer, matching Solidity\\'s native / operator.',\n        explanation: 'When 7 / 2, the exact result is 3.5. Floor gives 3 (discards the 0.5). The user loses the fractional part.',\n        examples: [\n          { code: '7 / 2 (Floor) → 3', label: 'Rounds down' },\n          { code: '(3 * 1e18) / 7 (Floor) → Loss: ~0.428 tokens', label: 'Positive loss (user loses)' },\n        ],\n        auditRelevance: 'Floor division favors the protocol at the user\\'s expense. Verify this is intentional. Repeated floor divisions can accumulate significant loss for users.',\n      },\n      {\n        id: 'rl-2',\n        title: 'Ceil Division (Round Up)',\n        rule: 'Ceil mode rounds division results up to the nearest integer, often implemented in DeFi for fairness.',\n        explanation: 'When 7 / 2, Ceil gives 4 (adds the missing 0.5). The protocol loses the fractional part to favor the user.',\n        examples: [\n          { code: '7 / 2 (Ceil) → 4', label: 'Rounds up' },\n          { code: '(3 * 1e18) / 7 (Ceil) → Loss: ~-0.428 tokens', label: 'Negative loss (protocol loses)' },\n        ],\n        auditRelevance: 'Ceil is used in borrowing/lending to ensure users always get slightly more. Verify ceil is implemented correctly: (a + b - 1) / b. Check for off-by-one errors.',\n      },\n      {\n        id: 'rl-3',\n        title: 'Loss = Exact - Result',\n        rule: 'Loss shows the difference between the mathematically exact result and the rounded result, displayed in the output\\'s decimal precision.',\n        explanation: 'Positive loss means the user loses value (floor). Negative loss means the protocol loses value (ceil). Loss is scaled to the result\\'s decimals for easy interpretation.',\n        examples: [\n          { code: '7 / 2 = 3.5 exactly\\n7 / 2 (Floor) = 3, Loss = +0.5', label: 'User loses 0.5' },\n          { code: '7 / 2 (Ceil) = 4, Loss = -0.5', label: 'Protocol loses 0.5' },\n        ],\n        auditRelevance: 'Large loss values indicate significant precision loss. Verify that loss is acceptable for the use case. Check if rounding is done before or after scaling.',\n      },\n      {\n        id: 'rl-4',\n        title: 'Loss is Always Per-Operation',\n        rule: 'Loss is calculated and displayed for each division operation independently, not accumulated across the expression.',\n        explanation: 'SolCalc shows the loss from the final division in a complex expression. If there are multiple divisions, only the last one contributes to the displayed loss.',\n        examples: [\n          { code: '(a / b) / c → only shows loss from (result / c)', label: 'Last division' },\n          { code: 'a / (b / c) → shows loss from (a / result)', label: 'Outer division' },\n        ],\n        auditRelevance: 'Multiple divisions compound precision loss. Manually verify intermediate losses if accuracy is critical. Consider reordering operations to minimize loss.',\n      },\n      {\n        id: 'rl-5',\n        title: 'Zero Loss Means Exact Division',\n        rule: 'If Loss is 0 (or not shown), the division was exact with no remainder.',\n        explanation: 'When the numerator is perfectly divisible by the denominator, there is no rounding and no loss. Floor and Ceil produce identical results.',\n        examples: [\n          { code: '8 / 2 → 4 (exact), Loss: 0', label: 'No remainder' },\n          { code: '(6 * 1e18) / (2 * 1e18) → 3 * 1e0 (exact)', label: 'Clean division' },\n        ],\n        auditRelevance: 'Exact divisions are ideal. When auditing, check if the contract assumes exact division where it may not hold (e.g., user-provided inputs).',\n      },\n    ],\n  },\n  {\n    id: 'variables-literals',\n    title: 'Variables & Literals',\n    guidelines: [\n      {\n        id: 'vl-1',\n        title: 'Defining Variables',\n        rule: 'Variables must have both a value and a decimal precision explicitly defined before evaluation.',\n        explanation: 'SolCalc auto-detects variables in your expression and prompts you to provide their values and decimals. This simulates passing token amounts into a function.',\n        examples: [\n          { code: 'Expression: x * y / 1e18\\nDefine: x=2 (18 decimals), y=3 (18 decimals)', label: 'Variable definition' },\n        ],\n        auditRelevance: 'In contracts, verify that all variables have defined types and decimal handling. Missing decimal validation is a common vulnerability.',\n      },\n      {\n        id: 'vl-2',\n        title: 'Variable Names',\n        rule: 'Variable names must start with a letter and contain only letters, numbers, and underscores.',\n        explanation: 'Follows standard identifier rules. Case-sensitive (x and X are different variables).',\n        examples: [\n          { code: 'Valid: amount, price_usd, token1', label: 'Valid names' },\n          { code: 'Invalid: 1amount, price-usd, token$', label: 'Invalid names' },\n        ],\n        auditRelevance: 'Identifier naming in contracts should be clear and unambiguous. Watch for similar-looking names that could cause confusion (e.g., decimals vs _decimals).',\n      },\n      {\n        id: 'vl-3',\n        title: 'Integer Literals',\n        rule: 'Plain integers (1, 100, 500) are scalar literals with decimals=0 unless auto-lifted in +/- operations.',\n        explanation: 'Scalar literals are dimensionless constants. They adapt to context in addition/subtraction but remain decimals=0 in multiplication/division.',\n        examples: [\n          { code: '100 * 1e18 → 100 * 1e18 (no auto-lift)', label: 'Multiplication: no lift' },\n          { code: '1e18 + 100 → auto-lift 100 to 1e18', label: 'Addition: auto-lift' },\n        ],\n        auditRelevance: 'Verify that integer constants in contracts are scaled appropriately for their context. Unscaled constants in multiplication cause magnitude errors.',\n      },\n      {\n        id: 'vl-4',\n        title: 'Scientific Notation Literals',\n        rule: '1e18, 2.5e6, etc. are scale constants with value and decimals derived from the notation.',\n        explanation: 'SolCalc parses 1e18 as {value: 10^18, decimals: 18}. Fractional mantissas like 2.5e6 become {value: 2.5 × 10^6, decimals: 6}.',\n        examples: [\n          { code: '1e18 → {value: 10^18, decimals: 18}', label: 'Unit scale' },\n          { code: '2.5e6 → {value: 2500000, decimals: 6}', label: 'Fractional mantissa' },\n        ],\n        auditRelevance: 'Scale constants are foundational to DeFi. Verify that all scale factors match the intended token decimals (e.g., USDC uses 1e6, not 1e18).',\n      },\n    ],\n  },\n  {\n    id: 'defi-patterns',\n    title: 'Common DeFi Patterns',\n    guidelines: [\n      {\n        id: 'dp-1',\n        title: 'Shares to Assets Conversion',\n        rule: 'shares * totalAssets / totalShares gives the asset amount for a given share amount.',\n        explanation: 'Vault shares represent proportional ownership. Convert shares to assets by multiplying by the exchange rate (totalAssets / totalShares). Must preserve decimals.',\n        examples: [\n          { code: 'shares (18 decimals) * totalAssets (18 decimals) / totalShares (18 decimals) → 18 decimals', label: 'ERC4626 pattern' },\n        ],\n        auditRelevance: 'Verify that shares and assets use consistent decimals. Check for rounding mode (floor favors vault, ceil favors user). Ensure no precision loss on small amounts.',\n      },\n      {\n        id: 'dp-2',\n        title: 'Price * Amount Calculations',\n        rule: 'price * amount / 1e18 converts an amount to its value in another unit (e.g., tokens to USD).',\n        explanation: 'Prices are often stored with 18 decimals. Multiplying price by amount gives 36 decimals. Divide by 1e18 to scale back to 18 decimals.',\n        examples: [\n          { code: '(1500 * 1e18) * (10 * 1e18) / 1e18 → 15000 * 1e18', label: 'ETH price * ETH amount' },\n        ],\n        auditRelevance: 'Verify the scaling factor matches the price decimals. Wrong scaling causes magnitude errors. Check for missing or double scaling.',\n      },\n      {\n        id: 'dp-3',\n        title: 'Interest Accrual (Ray Math)',\n        rule: 'Interest rates often use 27 decimals (Ray) for precision. Multiply principal by rate, then divide by 1e27.',\n        explanation: 'Ray (10^27) provides extra precision for interest calculations. Common in lending protocols like Aave. Must scale down after multiplication.',\n        examples: [\n          { code: 'principal (18 decimals) * rate (27 decimals) / 1e27 → 18 decimals', label: 'Interest calculation' },\n        ],\n        auditRelevance: 'Verify Ray constants use 1e27, not 1e18. Mixing WAD (1e18) and RAY (1e27) causes critical errors. Check for consistent use of scale constants.',\n      },\n      {\n        id: 'dp-4',\n        title: 'Basis Points (BPS)',\n        rule: 'Basis points (1 BPS = 0.01%) use 4 decimals. To apply a BPS fee: amount * bps / 10000.',\n        explanation: 'BPS is a standard for fees and percentages. 100 BPS = 1%. Multiply by BPS, divide by 10000 (not 1e18).',\n        examples: [\n          { code: 'amount (18 decimals) * 250 (BPS) / 10000 → 2.5% fee', label: '250 BPS = 2.5%' },\n        ],\n        auditRelevance: 'Verify fee calculations use 10000, not 1e4 or 1e18. Check for missing scaling. Ensure BPS values are validated (max 10000 for 100%).',\n      },\n    ],\n  },\n  {\n    id: 'limitations',\n    title: 'Limitations & Unsupported Features',\n    guidelines: [\n      {\n        id: 'lim-1',\n        title: 'No General Exponentiation',\n        rule: 'SolCalc does not support x ** y where x ≠ 10 or y is a decimal-scaled value.',\n        explanation: 'General exponentiation with decimal tracking is ambiguous. Restricting to 10 ** n keeps the tool focused on DeFi use cases.',\n        examples: [\n          { code: '10 ** 18 → Allowed ✓', label: 'Base-10 allowed' },\n          { code: '2 ** 256 → Not Allowed ✗', label: 'Other bases not allowed' },\n        ],\n        auditRelevance: 'If a contract uses arbitrary exponentiation, verify it\\'s not operating on decimal-scaled values. Exponentiation of scaled values causes exponential magnitude errors.',\n      },\n      {\n        id: 'lim-2',\n        title: 'No Bitwise Operations',\n        rule: 'SolCalc does not support bitwise AND, OR, XOR, shifts, etc.',\n        explanation: 'Bitwise operations are low-level and not relevant to decimal arithmetic. Use a different tool for bitwise analysis.',\n        examples: [\n          { code: 'x & y → Not Supported ✗', label: 'Bitwise AND' },\n          { code: 'x << 2 → Not Supported ✗', label: 'Bit shift' },\n        ],\n        auditRelevance: 'Bitwise operations in DeFi are rare. If present, verify they\\'re not being applied to decimal-scaled values (which would corrupt the value).',\n      },\n      {\n        id: 'lim-3',\n        title: 'No Floating-Point Operations',\n        rule: 'SolCalc uses BigInt-only arithmetic. No floating-point math at any stage.',\n        explanation: 'Matches Solidity\\'s integer-only behavior. All values are represented as scaled integers. Division truncates, no rounding to nearest.',\n        examples: [\n          { code: '7 / 2 → 3 (not 3.5)', label: 'Integer division' },\n        ],\n        auditRelevance: 'Solidity has no float type. Any \"decimal\" math must be done via scaled integers. Verify contracts never rely on floating-point behavior.',\n      },\n      {\n        id: 'lim-4',\n        title: 'No Function Calls or Complex Expressions',\n        rule: 'SolCalc evaluates arithmetic expressions only. No function calls (sqrt, abs, min, max, etc.).',\n        explanation: 'Focused on basic arithmetic with decimal tracking. For complex math, break it into steps and evaluate each step separately.',\n        examples: [\n          { code: 'sqrt(x) → Not Supported ✗', label: 'Function call' },\n          { code: '(x + y) * (a - b) → Supported ✓', label: 'Arithmetic only' },\n        ],\n        auditRelevance: 'When auditing complex math libraries (e.g., sqrt for AMMs), verify each operation separately. Check that decimals are preserved across function boundaries.',\n      },\n    ],\n  },\n  {\n    id: 'audit-pitfalls',\n    title: 'Audit Pitfalls',\n    guidelines: [\n      {\n        id: 'ap-1',\n        title: 'Multiplication Before Division',\n        rule: 'Always multiply before dividing to preserve precision. a * b / c is better than a / c * b.',\n        explanation: 'Dividing first loses precision in the intermediate result. Multiplying first maximizes the numerator before truncation.',\n        examples: [\n          { code: '(1e18 * 3) / 7 → Loss: ~0.428', label: 'Multiply first (better)' },\n          { code: '(1e18 / 7) * 3 → Loss: ~1.285', label: 'Divide first (worse)' },\n        ],\n        auditRelevance: 'Check operation order in contracts. Premature division causes excess precision loss. Verify the order maximizes numerator before division.',\n      },\n      {\n        id: 'ap-2',\n        title: 'Verify Scale Factor Matches Output',\n        rule: 'After multiplication, the scale-down factor must match the desired output decimals.',\n        explanation: 'If you multiply two 18-decimal values and want 6-decimal output, divide by 1e30 (not 1e18). The scale factor depends on both input and output decimals.',\n        examples: [\n          { code: '(a * b) / 1e18 → 18-decimal output', label: 'Standard WAD' },\n          { code: '(a * b) / 1e30 → 6-decimal output', label: 'Custom scaling' },\n        ],\n        auditRelevance: 'Mismatched scale factors are a common bug. Verify the divisor is computed correctly based on input and output decimals. Check for hardcoded scale constants.',\n      },\n      {\n        id: 'ap-3',\n        title: 'Check Decimal Assumptions on External Calls',\n        rule: 'When calling external contracts, never assume decimal precision. Always query decimals() explicitly.',\n        explanation: 'Different tokens use different decimals (USDC=6, WETH=18, WBTC=8). Hardcoding 18 decimals causes magnitude errors for non-standard tokens.',\n        examples: [\n          { code: 'USDC.decimals() → 6 (not 18!)', label: 'Non-standard decimals' },\n        ],\n        auditRelevance: 'Check if the contract queries decimals() or assumes 18. Assuming 18 for USDC causes 10^12 magnitude error. Verify all token interactions handle variable decimals.',\n      },\n      {\n        id: 'ap-4',\n        title: 'Repeated Division Compounds Loss',\n        rule: 'Each division operation truncates. Multiple divisions compound the loss. Combine divisions when possible.',\n        explanation: '(a / b) / c loses more precision than a / (b * c). Combine denominators to minimize rounding operations.',\n        examples: [\n          { code: 'a / b / c → Two truncations', label: 'Compounded loss' },\n          { code: 'a / (b * c) → One truncation', label: 'Reduced loss' },\n        ],\n        auditRelevance: 'Look for sequential divisions in contracts. Verify if they can be combined. Check if accumulated loss is acceptable for the use case.',\n      },\n    ],\n  },\n  {\n    id: 'type-bounds',\n    title: 'Solidity Type Bounds',\n    guidelines: [\n      {\n        id: 'tb-1',\n        title: 'Type Bounds Are Scalars',\n        rule: 'type(uintX).max, type(uintX).min, type(intX).max, and type(intX).min are scalar values with decimals = 0.',\n        explanation: 'Solidity type bounds represent the mathematical limits of integer types, not token amounts. They are dimensionless scalars used for overflow checks and sentinel values.',\n        examples: [\n          { code: 'type(uint256).max → 2^256 - 1 (decimals: 0)', label: 'Maximum unsigned value' },\n          { code: 'type(int128).min → -2^127 (decimals: 0)', label: 'Minimum signed value' },\n          { code: 'type(uint8).max → 255', label: 'Small type bound' },\n        ],\n        auditRelevance: 'Type bounds are used for overflow checks, caps, and sentinel values. Verify they are never mixed with scaled token amounts without proper conversion.',\n      },\n      {\n        id: 'tb-2',\n        title: 'Supported Type Ranges',\n        rule: 'SolCalc supports all Solidity integer types: uint8 through uint256 and int8 through int256 (multiples of 8).',\n        explanation: 'uint = uint256 and int = int256 are aliases. Unsigned types range from 0 to 2^N - 1. Signed types range from -2^(N-1) to 2^(N-1) - 1.',\n        examples: [\n          { code: 'uint8: 0 to 255', label: '8-bit unsigned' },\n          { code: 'uint256: 0 to 2^256 - 1', label: '256-bit unsigned' },\n          { code: 'int8: -128 to 127', label: '8-bit signed' },\n          { code: 'int256: -2^255 to 2^255 - 1', label: '256-bit signed' },\n        ],\n        auditRelevance: 'Verify contracts use appropriate type sizes. Smaller types (uint8, uint64) can save gas but increase overflow risk. uint256 is the safest default.',\n      },\n      {\n        id: 'tb-3',\n        title: 'Overflow Detection and Wrapping',\n        rule: 'Overflow detection only applies to pure scalar results (decimals = 0). When arithmetic on type bounds exceeds the type\\'s range, SolCalc shows both the unbounded result and the wrapped Solidity value.',\n        explanation: 'SolCalc computes using unbounded math (no overflow), then checks if the result would overflow in Solidity. Overflow warnings are only shown when the final result has decimals = 0, since Solidity integer types are always scalars. Fixed-point results (decimals > 0) don\\'t trigger overflow warnings.',\n        examples: [\n          { code: 'type(uint256).max + 1 → Unbounded result + wrap preview', label: 'Overflow detected (scalar)' },\n          { code: 'type(uint256).max + 3 → Wraps to 2', label: 'Modulo 2^256' },\n          { code: 'type(uint256).max / 1e18 → No overflow warning', label: 'Fixed-point result (no warning)' },\n          { code: '(type(uint256).max + 1) * 1e18 / 1e18 → Overflow detected', label: 'Decimals cancel to 0' },\n        ],\n        auditRelevance: 'In unchecked blocks, Solidity arithmetic wraps silently. SolCalc helps auditors reason about overflow behavior without executing contracts. Verify wrapping is intentional. Note that overflow only matters for pure integer operations.',\n      },\n      {\n        id: 'tb-4',\n        title: 'Common Audit Patterns',\n        rule: 'Type bounds are used for caps, overflow checks, and sentinel values. Verify these patterns are implemented correctly.',\n        explanation: 'Protocols use type(uintX).max for unlimited approvals, caps on user inputs, and sentinel values. Auditors must verify these don\\'t create vulnerabilities.',\n        examples: [\n          { code: 'require(amount <= type(uint256).max / 1e18)', label: 'Prevent overflow after scaling' },\n          { code: 'if (allowance == type(uint256).max) return;', label: 'Unlimited approval check' },\n          { code: 'uint256 cap = type(uint128).max;', label: 'Safe cap for downcasting' },\n        ],\n        auditRelevance: 'Verify overflow checks are correct. Ensure sentinel values (like max approval) don\\'t bypass critical logic. Check downcasting doesn\\'t silently truncate values.',\n      },\n    ],\n  },\n  {\n    id: 'comparisons',\n    title: 'Comparison Operators',\n    guidelines: [\n      {\n        id: 'cmp-1',\n        title: 'Comparison Operators Supported',\n        rule: 'SolCalc supports all Solidity comparison operators: == (equal), != (not equal), < (less than), <= (less than or equal), > (greater than), >= (greater than or equal).',\n        explanation: 'Comparison expressions evaluate to boolean results (true/false) instead of numeric values. The comparison happens at the top level only - you cannot nest or chain comparisons.',\n        examples: [\n          { code: 'amount > balance → true or false', label: 'Simple comparison' },\n          { code: 'type(uint256).max > 0 → true', label: 'Type bound comparison' },\n          { code: 'price * amount == total → Arithmetic then compare', label: 'Complex expression' },\n        ],\n        auditRelevance: 'Comparisons are used in require statements, conditionals, and bounds checks. Verify the comparison logic matches the business requirements and handles edge cases correctly.',\n      },\n      {\n        id: 'cmp-2',\n        title: 'Two-Phase Evaluation',\n        rule: 'Comparisons use two-phase evaluation: Phase 1 evaluates both sides as numeric expressions, Phase 2 performs the boolean comparison.',\n        explanation: 'Both sides of a comparison are first evaluated using standard arithmetic rules (with decimal propagation). Then the raw bigint values are compared. Any overflow warnings from Phase 1 are preserved in the result.',\n        examples: [\n          { code: 'amount * price == max\\nPhase 1: amount * price → numeric result\\nPhase 2: result == max → boolean', label: 'Two phases' },\n        ],\n        auditRelevance: 'Understanding the two phases helps auditors verify that arithmetic is performed correctly before comparison. Check that both sides produce valid numeric results with proper decimal handling.',\n      },\n      {\n        id: 'cmp-3',\n        title: 'Auto-Normalization for Decimal Mismatches',\n        rule: 'If the two sides of a comparison have different decimal scales, SolCalc auto-normalizes both to the higher (more precise) decimal scale before comparing.',\n        explanation: 'This handles edge cases like comparing with negative decimals (e.g., type(uint256).max / 1e18 has -18 decimals). Auto-normalization only applies to comparisons, not arithmetic operations.',\n        examples: [\n          { code: 'amount (18 decimals) <= type(uint256).max / 1e18 (-18 decimals)\\nNormalizes both to 18 decimals', label: 'Negative decimal handling' },\n          { code: 'usdc (6 decimals) == weth (18 decimals)\\nNormalizes both to 18 decimals', label: 'Mixed token decimals' },\n        ],\n        auditRelevance: 'In Solidity, comparing values with different units requires explicit conversion. Verify contracts properly scale values before comparison. SolCalc auto-normalization simulates what the correct scaling would be.',\n      },\n      {\n        id: 'cmp-4',\n        title: 'Comparison Result Display',\n        rule: 'Comparison results show: the boolean result (true/false), the operator used, the left and right human-readable values, and the decimal scale.',\n        explanation: 'Unlike numeric results that show raw/human/solidity/loss, comparison results display the comparison details in a different format optimized for boolean evaluation.',\n        examples: [\n          { code: 'Result: true\\nOperator: <=\\nLeft: 1.000000000000000000\\nRight: 115792089237316195423570985008687907853269984665640564039457.584007913129639935', label: 'Comparison output' },\n        ],\n        auditRelevance: 'When auditing require statements or conditionals, verify the comparison logic produces the expected boolean result for boundary cases and edge inputs.',\n      },\n    ],\n  },\n  {\n    id: 'advanced',\n    title: 'Advanced / Audit-Grade',\n    guidelines: [\n      {\n        id: 'adv-1',\n        title: 'Overflow Behavior in Solidity',\n        rule: 'Solidity 0.8+ reverts on overflow by default. In unchecked blocks, arithmetic wraps modulo 2^256 (or the type size).',\n        explanation: 'Before Solidity 0.8, arithmetic could silently overflow. Modern Solidity reverts unless wrapped in an unchecked{} block. SolCalc shows what the wrapped value would be.',\n        examples: [\n          { code: 'type(uint256).max + 1 → Reverts (Solidity 0.8+)', label: 'Checked overflow' },\n          { code: 'unchecked { type(uint256).max + 1 } → Wraps to 0', label: 'Unchecked overflow' },\n        ],\n        auditRelevance: 'For Solidity <0.8, verify SafeMath is used. For 0.8+, verify unchecked blocks are intentional and safe. Use SolCalc to preview overflow behavior before it happens on-chain.',\n      },\n      {\n        id: 'adv-2',\n        title: 'Gas-Optimal Rounding',\n        rule: 'Ceil division in Solidity uses (a + b - 1) / b to avoid expensive modulo operations.',\n        explanation: 'Computing the remainder with a % b costs gas. The formula (a + b - 1) / b achieves ceil without remainder calculation.',\n        examples: [\n          { code: '(a + b - 1) / b → Ceil without modulo', label: 'Gas-optimized ceil' },\n        ],\n        auditRelevance: 'Verify ceil implementations use this pattern. Check for edge case: a + b - 1 could overflow if a is near type(uint256).max. Ensure bounds are validated.',\n      },\n      {\n        id: 'adv-3',\n        title: 'Negative Values and Signed Arithmetic',\n        rule: 'SolCalc supports negative intermediate values (for loss calculation), but Solidity contracts must handle signed types carefully.',\n        explanation: 'Solidity has int256 for signed values. Mixing uint and int requires explicit casting. Underflows (e.g., uint256 a - b where b > a) revert.',\n        examples: [\n          { code: 'int256 loss = int256(exact) - int256(rounded)', label: 'Signed loss calculation' },\n        ],\n        auditRelevance: 'Verify that contracts use appropriate types (uint vs int). Check for unsafe casts that could cause unexpected behavior. Test boundary cases with negative values.',\n      },\n      {\n        id: 'adv-4',\n        title: 'Precision Loss is Unavoidable',\n        rule: 'Integer division always loses precision unless exact. Design protocols to tolerate small rounding losses.',\n        explanation: 'No amount of clever math can eliminate truncation in integer division. The best you can do is minimize loss and choose the rounding direction intentionally.',\n        examples: [\n          { code: '(1e18 * 1) / 3 → Loss: ~0.333 tokens', label: 'Unavoidable loss' },\n        ],\n        auditRelevance: 'Ensure the protocol design accounts for rounding loss. Verify that accumulated dust is handled (e.g., donating to reserves, burning, etc.). Check that loss doesn\\'t break invariants.',\n      },\n    ],\n  },\n];\n","/**\n * Guideline Component\n *\n * Single-column drill-down navigation:\n * - Index view: Show all guidelines grouped by section\n * - Content view: Show individual guideline with back button\n */\n\nimport { useState } from 'react';\nimport { GUIDELINES, type Guideline } from '../data/guidelines';\nimport './Guideline.css';\n\ninterface GuidelineProps {\n  isOpen: boolean;\n  onClose: () => void;\n}\n\ntype ViewMode = 'index' | 'content';\n\nexport function Guideline({ isOpen, onClose }: GuidelineProps) {\n  const [viewMode, setViewMode] = useState<ViewMode>('index');\n  const [selectedGuideline, setSelectedGuideline] = useState<Guideline | null>(null);\n\n  const handleGuidelineClick = (guideline: Guideline) => {\n    setSelectedGuideline(guideline);\n    setViewMode('content');\n  };\n\n  const handleBackClick = () => {\n    setViewMode('index');\n    setSelectedGuideline(null);\n  };\n\n  const handleClose = () => {\n    setViewMode('index');\n    setSelectedGuideline(null);\n    onClose();\n  };\n\n  if (!isOpen) {\n    return null;\n  }\n\n  return (\n    <div className=\"guideline-overlay\" onClick={handleClose}>\n      <div className=\"guideline-panel\" onClick={(e) => e.stopPropagation()}>\n        <div className=\"guideline-header\">\n          <h2>SolCalc Guidelines</h2>\n          <button\n            className=\"guideline-close\"\n            onClick={handleClose}\n            aria-label=\"Close guidelines\"\n          >\n            ×\n          </button>\n        </div>\n\n        <div className=\"guideline-content\">\n          {viewMode === 'index' && <IndexView onGuidelineClick={handleGuidelineClick} />}\n          {viewMode === 'content' && selectedGuideline && (\n            <ContentView guideline={selectedGuideline} onBack={handleBackClick} />\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\ninterface IndexViewProps {\n  onGuidelineClick: (guideline: Guideline) => void;\n}\n\nfunction IndexView({ onGuidelineClick }: IndexViewProps) {\n  return (\n    <div className=\"guideline-index\">\n      {GUIDELINES.map((section) => (\n        <div key={section.id} className=\"guideline-section\">\n          <h3 className=\"section-title\">{section.title}</h3>\n          <ul className=\"guideline-list\">\n            {section.guidelines.map((guideline) => (\n              <li key={guideline.id}>\n                <button\n                  className=\"guideline-item\"\n                  onClick={() => onGuidelineClick(guideline)}\n                >\n                  <span className=\"guideline-item-title\">{guideline.title}</span>\n                  <span className=\"guideline-item-arrow\">→</span>\n                </button>\n              </li>\n            ))}\n          </ul>\n        </div>\n      ))}\n    </div>\n  );\n}\n\ninterface ContentViewProps {\n  guideline: Guideline;\n  onBack: () => void;\n}\n\nfunction ContentView({ guideline, onBack }: ContentViewProps) {\n  return (\n    <div className=\"guideline-detail\">\n      <button className=\"guideline-back\" onClick={onBack}>\n        ← Back to Guidelines\n      </button>\n\n      <div className=\"guideline-detail-content\">\n        <h3 className=\"guideline-detail-title\">{guideline.title}</h3>\n\n        <div className=\"guideline-section-block\">\n          <h4>Rule</h4>\n          <p>{guideline.rule}</p>\n        </div>\n\n        <div className=\"guideline-section-block\">\n          <h4>Explanation</h4>\n          <p>{guideline.explanation}</p>\n        </div>\n\n        <div className=\"guideline-section-block\">\n          <h4>Examples</h4>\n          {guideline.examples.map((example, index) => (\n            <div key={index} className=\"guideline-example\">\n              <pre className=\"example-code\">{example.code}</pre>\n              {example.label && <p className=\"example-label\">{example.label}</p>}\n            </div>\n          ))}\n        </div>\n\n        <div className=\"guideline-section-block\">\n          <h4>Audit Relevance</h4>\n          <p>{guideline.auditRelevance}</p>\n        </div>\n      </div>\n    </div>\n  );\n}\n","/**\n * Main App Component\n *\n * Layout structure (top to bottom):\n * 1. App Header\n * 2. Toolbar\n * 3. Expression\n * 4. Variables\n * 5. Results\n * 6. Footer\n */\n\nimport { useState } from 'react';\nimport { CalculatorProvider, useCalculator } from './state/store';\nimport { Toolbar } from './components/Toolbar';\nimport { Expression } from './components/Expression';\nimport { Variables } from './components/Variables';\nimport { Results } from './components/Results';\nimport { Footer } from './components/Footer';\nimport { Guideline } from './components/Guideline';\nimport './App.css';\n\nfunction AppContent() {\n  const { theme, setTheme } = useCalculator();\n  const [isGuidelineOpen, setIsGuidelineOpen] = useState(false);\n\n  const toggleTheme = () => {\n    setTheme(theme === 'dark' ? 'light' : 'dark');\n  };\n\n  const openGuideline = () => {\n    setIsGuidelineOpen(true);\n  };\n\n  const closeGuideline = () => {\n    setIsGuidelineOpen(false);\n  };\n\n  return (\n    <div className=\"app\">\n      <header className=\"app-header\">\n        <div className=\"app-branding\">\n          <div className=\"app-icon\">🧮</div>\n          <div className=\"app-title\">\n            <h1>SolCalc</h1>\n            <p className=\"app-subtitle text-secondary\">Mixed-Decimal Calculator</p>\n          </div>\n        </div>\n        <button\n          className=\"theme-toggle\"\n          onClick={toggleTheme}\n          aria-label=\"Toggle theme\"\n          title={`Switch to ${theme === 'dark' ? 'light' : 'dark'} mode`}\n        >\n          {theme === 'dark' ? '☀️' : '🌙'}\n        </button>\n      </header>\n\n      <Toolbar onGuideClick={openGuideline} />\n      <Expression />\n      <Variables />\n      <Results />\n      <Footer />\n\n      <Guideline isOpen={isGuidelineOpen} onClose={closeGuideline} />\n    </div>\n  );\n}\n\nexport function App() {\n  return (\n    <CalculatorProvider>\n      <AppContent />\n    </CalculatorProvider>\n  );\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport { App } from './App';\nimport './styles/global.css';\n\nReactDOM.createRoot(document.getElementById('root')!).render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n);\n"],"names":["f","require$$0","k","Symbol","for","l","m","Object","prototype","hasOwnProperty","n","__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","ReactCurrentOwner","p","key","ref","__self","__source","q","c","a","g","b","d","e","h","call","defaultProps","$$typeof","type","props","_owner","current","reactJsxRuntime_production_min","jsx","jsxs","jsxRuntimeModule","exports","TokenType","ASTNodeType","client","createRoot","hydrateRoot","SolCalcError","Error","constructor","message","super","this","name","ParseError","position","EvaluationError","DecimalMismatchError","leftDecimals","rightDecimals","operator","InvalidExponentiationError","DivisionByZeroError","UndefinedVariableError","variableName","MissingDecimalsError","tokenize","input","tokens","length","char","isWhitespace","substring","typeBoundResult","readTypeBound","push","token","endPosition","isDigit","readNumber","value","isIdentifierStart","readIdentifier","PLUS","MINUS","DIVIDE","LPAREN","RPAREN","POWER","MULTIPLY","EQUAL","NOT_EQUAL","LESS_THAN_OR_EQUAL","LESS_THAN","GREATER_THAN_OR_EQUAL","GREATER_THAN","EOF","startPos","isDecimal","exponentStart","DECIMAL_LITERAL","NUMBER","isIdentifierPart","IDENTIFIER","match","fullMatch","isSigned","bitsStr","bound","bits","parseInt","tokenValue","TYPE_BOUND","Parser","parse","ast","parseComparison","currentToken","left","parseExpression","getComparisonOperator","advance","right","nextToken","COMPARISON","tokenType","parseTerm","BINARY_OP","parseExponentiation","parsePrimary","EXPONENTIATION","base","exponent","parseNumberLiteral","parseDecimalLiteral","parseTypeBound","expr","toLowerCase","includes","mantissaStr","exponentStr","split","isNaN","rawValue","BigInt","NUMBER_LITERAL","decimals","bigintValue","parseScientificNotation","error","decimalToken","multiplierToken","integerPart","fractionalPart","decimalPlaces","numerator","multiplierValue","requiredMultiplier","normalizedValue","mantissa","solidityType","boundValue","TYPE_BOUND_LITERAL","multiplyDecimals","addDecimals","subtractDecimals","formatWithDecimals","toString","isNegative","paddedValue","padStart","result","slice","evaluate","variables","roundingMode","typeBounds","Set","evaluateNode","human","solidity","roundingLoss","divisionRemainder","divisionDivisor","divisionResultDecimals","rawLoss","remainder","divisor","resultDecimals","lossNumerator","precision","scaledNumerator","formatted","calculateDivisionLoss","decimalString","trimmed","replace","endsWith","trimTrailingZeros","warning","size","min","max","wrappedValue","calculateWrappedValue","wrappedHuman","kind","detectOverflow","raw","node","evaluateNumberLiteral","add","evaluateTypeBoundLiteral","variable","get","evaluateIdentifier","finalLeft","finalRight","leftIsScalarLiteral","rightIsScalarLiteral","quotient","evaluateBinaryOp","baseNode","exponentNum","Number","isSafeInteger","evaluateExponentiation","range","wrappedUnsigned","wrapped","evaluateExpression","expression","leftResult","rightResult","leftValue","rightValue","targetDecimals","Math","scaleFactor","leftHuman","rightHuman","evaluateComparison","extractVariables","visit","binOp","exp","comp","extractVariablesFromAST","CalculatorContext","createContext","CalculatorProvider","children","theme","setThemeState","useState","saved","localStorage","getItem","setExpressionState","setRoundingMode","setVariables","Map","setResult","setError","isEvaluating","setIsEvaluating","useEffect","document","documentElement","setAttribute","setItem","setTheme","useCallback","newTheme","setExpression","newExpression","detectedVars","prevVars","newVars","varName","keys","has","delete","set","setVariableValue","prev","existing","setVariableDecimals","coreVariables","varInput","humanValue","parseFloat","round","evalResult","err","String","allSet","values","timeout","setTimeout","clearTimeout","Provider","useCalculator","context","useContext","Toolbar","onGuideClick","className","onChange","target","onClick","title","Expression","htmlFor","id","placeholder","rows","spellCheck","Variables","varArray","Array","from","map","Results","isComparisonResult","hasOverflow","_a","isScalarTypeBound","Fragment","_b","Footer","disabled","href","rel","GUIDELINES","guidelines","rule","explanation","examples","code","label","auditRelevance","Guideline","isOpen","onClose","viewMode","setViewMode","selectedGuideline","setSelectedGuideline","handleClose","stopPropagation","IndexView","onGuidelineClick","guideline","ContentView","onBack","section","example","index","AppContent","isGuidelineOpen","setIsGuidelineOpen","App","ReactDOM","getElementById","render","React","StrictMode"],"mappings":"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","x_google_ignoreList":[0,1,3]}